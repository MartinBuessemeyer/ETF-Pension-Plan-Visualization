(this["webpackJsonpetf-vis"]=this["webpackJsonpetf-vis"]||[]).push([[0],{159:function(t,e,a){},165:function(t,e,a){"use strict";a.r(e);var i=a(13),n=a.n(i),s=a(49),r=a.n(s),o=(a(159),a(9)),l=a.n(o),h=a(5),d=a(16),c=a(0),u=a(3),f=a(4),v=a(14),p=a(6),y=a(7),x=a(11),b=a(2),g=a(33),m=a.n(g),S=a(8),j=864e5,O=12;function C(t){var e=Number(t);return Number.isNaN(e)||!Number.isInteger(e)?0:e}function w(t){return function(t){var e=Number(t);return Number.isNaN(e)?0:e}(t)/100}function I(t){var e=Number(t)/100;return!Number.isNaN(e)&&e>=0&&e<=1}function T(t){var e=Number(t);return!Number.isNaN(e)&&Number.isInteger(e)&&e>=0}function P(t){return 0===t.getMonth()}function D(t,e){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(l.a.mark((function t(e,a){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.d("https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY_ADJUSTED&symbol=".concat(e,"&apikey=").concat(a,"&datatype=csv"),(function(t){if(void 0===t.timestamp||void 0===t["dividend amount"]||void 0===t["adjusted close"])throw new Error("The history of ".concat(e," contained an undefined field."));return{date:new Date(t.timestamp.toString()),dividend:parseFloat(t["dividend amount"]),course:parseFloat(t["adjusted close"])}}));case 2:return(i=t.sent).sort((function(t,e){return t.date.valueOf()-e.date.valueOf()})),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return t.map((function(t){return[E(t.date),t.course]}))}function F(t){var e=t[0].date.getFullYear(),a=[[e,0]];return t.forEach((function(t){t.date.getFullYear()===e?a[a.length-1][1]+=t.dividend:(e=t.date.getFullYear(),a.push([e,t.dividend]))})),a.sort((function(t,e){return t[0]-e[0]})),a}function E(t){return Math.floor(t.getTime()/j)}function M(t){return new Error("First call loadHistoricalDataIfNotPresent() before predicting: ".concat(t))}function V(t){var e,a,i=t.getDate(),n=(e=t.getMonth(),a=t.getFullYear(),new Date(a,e+1,0).getDate()),s=Math.round(i/n);return new Date(t.getFullYear(),t.getMonth()+s)}var _=function(){function t(){Object(u.a)(this,t),this.historicalData={},this.coursePredictors={},this.dividendPredictors={}}return Object(f.a)(t,[{key:"_loadAndCacheHistoricalETFData",value:function(){var e=Object(d.a)(l.a.mark((function e(a){var i,n,s,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a in this.historicalData)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D(a,t.apiKey);case 4:i=e.sent,n=A(i),s=t._calculateTimestampForPredictorRepetition(n),r=F(i),o=t._calculateTimestampForPredictorRepetition(r),this.historicalData[a]={history:i,courseForecastArray:n,dividendForecastArray:r},this.coursePredictors[a]={maxTimestampBeforeCoursePredictorRepetition:s,predictors:{}},this.dividendPredictors[a]={maxYearBeforeDividendPredictorRepetition:o,predictors:{}};case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCoursePredictorIfNotPresent",value:function(e,a){if(!(a in this.coursePredictors[e])){var i=this.historicalData[e].courseForecastArray,n=i[i.length-1][0]-Math.abs(i[i.length-1][0]-a)*t.backCastTimeFactor-t.backCastTimestampConstant,s=i.filter((function(t){return t[0]>=n}));this.coursePredictors[e].predictors[a]=m.a.linear(s,{order:2,precision:20})}}},{key:"_courseDateToPredictorTimestampAndDateTimestamp",value:function(t,e){var a=E(t);return[a>this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition?this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition:a,a]}},{key:"_createDividendPredictorIfNotPresent",value:function(e,a){if(!(a in this.dividendPredictors[e])){var i=this.historicalData[e].dividendForecastArray,n=i[i.length-1][0]-Math.abs(i[i.length-1][0]-a)*t.backCastTimeFactor-t.backCastTimestampConstant,s=i.filter((function(t){return t[0]>=n}));this.dividendPredictors[e].predictors[a]=m.a.linear(s,{order:2,precision:20})}}},{key:"_dividendYearToPredictorYear",value:function(t,e){return this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition<e?this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition:e}},{key:"predictCourse",value:function(t,e){if(!(t in this.coursePredictors))throw M(t);var a=this._courseDateToPredictorTimestampAndDateTimestamp(e,t),i=Object(x.a)(a,2),n=i[0],s=i[1];return this._createCoursePredictorIfNotPresent(t,n),this.coursePredictors[t].predictors[n].predict(s)[1]}},{key:"predictDividend",value:function(t,e){if(!(t in this.dividendPredictors))throw M(t);var a=this._dividendYearToPredictorYear(t,e);return this._createDividendPredictorIfNotPresent(t,a),Math.max(0,this.dividendPredictors[t].predictors[a].predict(e)[1])}}],[{key:"configure",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;t.apiKey=e,t.backCastTimeFactor=a;var n=new Date(0);if(n.setMonth(i),t.backCastTimestampConstant=E(n),null!=t.instance){var s=t.getInstance();for(var r in s.coursePredictors)s.coursePredictors[r].maxTimestampBeforeCoursePredictorRepetition=t._calculateTimestampForPredictorRepetition(s.historicalData[r].courseForecastArray);for(var o in s.dividendPredictors)s.dividendPredictors[o].maxYearBeforeDividendPredictorRepetition=t._calculateTimestampForPredictorRepetition(s.historicalData[o].dividendForecastArray)}}},{key:"loadHistoricData",value:function(){var e=Object(d.a)(l.a.mark((function e(a,i){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.configure(a),n=t.getInstance(),e.t0=l.a.keys(i);case 3:if((e.t1=e.t0()).done){e.next=9;break}return s=e.t1.value,e.next=7,n._loadAndCacheHistoricalETFData(i[s].symbol);case 7:e.next=3;break;case 9:console.log("Finished loading the historic data.");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"_calculateTimestampForPredictorRepetition",value:function(e){var a=e[0][0],i=e[e.length-1][0];return i+(i-a)/t.backCastTimeFactor}}]),t}();_.instance=null,_.apiKey="",_.backCastTimestampConstant=7,_.backCastTimeFactor=2;var N=a(52),z=a.n(N),Y=.26375;function L(t,e){return e.totalShares[t]*e.sharePrizes[t]}function G(t,e){return e.dividendTotalShares[t]*e.sharePrizes[t]}function R(t,e){return e.newShares[t]*e.sharePrizes[t]}function W(t){var e=new Date(t);return e.setMonth(t.getMonth()+1),e}function B(t,e){if(function(t){return 11===t.getMonth()}(e)){var a=_.getInstance().predictDividend(t,e.getFullYear()),i=_.getInstance().predictCourse(t,e);return a>0?a:.025*i}return 0}function H(t,e){var a=t*e.percentageCosts+e.fixedCosts,i=Math.max(t-a,0);return[i,a=t-i]}function K(t,e){return[Math.max(0,t-e),Math.max(0,e-t)]}function U(t,e){var a=function(t){var e,a=0,i=Object(b.a)(Object.keys(t.totalShares));try{for(i.s();!(e=i.n()).done;)a+=L(e.value,t)}catch(n){i.e(n)}finally{i.f()}return a}(t),i=t.date,n=i.getFullYear()-e.getFullYear()+(i.getMonth()-e.getMonth())/O;t.inflation=a-a*Math.pow(.99,n)}function J(t,e,a){var i=Math.floor(a/O);return t*Math.pow(1+e,i)}function q(t,e,a,i){if(!P(e)||t.length<2)return[0,a];var n,s,r,o,l=0,h=t[t.length-1],d=t.length-O>1?t[t.length-O]:t[1],c=Object(b.a)(Object.keys(i));try{for(c.s();!(n=c.n()).done;){for(var u=n.value,f=L(u,d)*(O-d.date.getMonth())/O,v=1;v<O&&t.length-v>0;v++){f+=R(u,t[t.length-v])*v/O}f*=.0049;var p=L(u,h)-h.totalInvestedMoney[u],y=0;t.length>O&&(y=Math.max(0,L(u,t[t.length-1-O])-t[t.length-1-O].totalInvestedMoney[u]));var g=(s=p-y,r=0,o=f,Math.max(r,Math.min(s,o))),m=K(g,a),S=Object(x.a)(m,2);g=S[0],a=S[1],l+=.7*g*Y}}catch(j){c.e(j)}finally{c.f()}return[l,a]}function Z(t,e,a,i,n,s){var r,o=_.getInstance(),l=0,h=t[t.length-1],d={date:a,newShares:Object(c.a)({},h.newShares),totalShares:Object(c.a)({},h.totalShares),dividendNewShares:Object(c.a)({},h.dividendNewShares),dividendTotalShares:Object(c.a)({},h.dividendTotalShares),totalCosts:h.totalCosts,sharePrizes:Object(c.a)({},h.sharePrizes),totalInvestedMoney:Object(c.a)({},h.totalInvestedMoney),newInvestedMoney:Object(c.a)({},h.newInvestedMoney),newInvestment:0,totalTaxes:h.totalTaxes,totalPayout:Object(c.a)({},h.totalPayout),newPayout:Object(c.a)({},h.newPayout),inflation:0},u=Object(b.a)(Object.keys(n));try{for(u.s();!(r=u.n()).done;){var f=r.value,v=n[f]*e;d.newInvestment+=v;var p=H(v,s.costConfig),y=Object(x.a)(p,2),g=y[0];l+=y[1],d.newInvestedMoney[f]=g,d.totalInvestedMoney[f]+=g;var m=o.predictCourse(f,a),S=g/m;d.sharePrizes[f]=m,d.newShares[f]=S;var j=B(f,a),O=d.totalShares[f]*j/m;d.newShares[f]+=O,d.dividendNewShares[f]=O,d.dividendTotalShares[f]+=O,d.totalShares[f]+=d.newShares[f],d.newPayout[f]=0}}catch(I){u.e(I)}finally{u.f()}d.totalCosts+=l;var C=q(t,a,s.taxFreeAmount,n),w=Object(x.a)(C,1)[0];d.totalTaxes+=w,U(d,i),t.push(d)}function $(t,e,a,i,n,s,r,o,l){P(i)&&(o=s.taxFreeAmount);var h,d=_.getInstance(),u=0,f=0,v=t[t.length-1],p={date:i,newShares:Object(c.a)({},v.newShares),totalShares:Object(c.a)({},v.totalShares),dividendNewShares:Object(c.a)({},v.dividendNewShares),dividendTotalShares:Object(c.a)({},v.dividendTotalShares),totalCosts:v.totalCosts,sharePrizes:Object(c.a)({},v.sharePrizes),totalInvestedMoney:Object(c.a)({},v.totalInvestedMoney),newInvestedMoney:Object(c.a)({},v.newInvestedMoney),newInvestment:0,totalTaxes:v.totalTaxes,totalPayout:Object(c.a)({},v.totalPayout),newPayout:Object(c.a)({},v.newPayout),inflation:0},y=Object(b.a)(Object.keys(a));try{for(y.s();!(h=y.n()).done;){var g=h.value,m=d.predictCourse(g,i);if(p.sharePrizes[g]=m,p.newPayout[g]=0,p.newInvestedMoney[g]=0,l[g].investmentStepsIdx<t.length){for(var S=a[g]*e,j=0,O=H(S,s.costConfig)[1],C=0,w=l[g].investmentStepsIdx,I=t[w].newShares[g]-l[g].alreadySoldShares;w<t.length;w++){var T=t[w],D=S-j,k=m*(w===l[g].investmentStepsIdx?T.newShares[g]-l[g].alreadySoldShares:T.newShares[g]),A=Math.min(k,D),F=A/m;I=T.newShares[g]-F,I-=w===l[g].investmentStepsIdx?l[g].alreadySoldShares:0;var E=Math.max(0,A-(O-C));C+=Math.max(0,A-E);var M=F*T.sharePrizes[g],V=Math.max(0,E-M),N=K(V,o),z=Object(x.a)(N,2);V=z[0],o=z[1];var L=.7*V*Y,G=K(L,r),R=Object(x.a)(G,2);L=R[0],r=R[1],f+=L;var W=E-L;p.newPayout[g]+=W,p.totalPayout[g]+=W,p.totalShares[g]-=F,j+=A;var J=0;J=w===l[g].investmentStepsIdx?Math.max(0,T.dividendNewShares[g]-l[g].alreadySoldShares):T.dividendNewShares[g];var Z=Math.min(J,F);if(p.dividendTotalShares[g]-=Z,j>=S)break}u+=C,l[g].investmentStepsIdx=w,l[g].investmentStepsIdx+=0===I?1:0,l[g].alreadySoldShares=w<t.length?t[w].newShares[g]-I:0}var $=p.totalShares[g]*B(g,i)/m;p.newShares[g]=$,p.totalShares[g]+=$,p.dividendNewShares[g]=$,p.dividendTotalShares[g]+=$;var Q=q(t,i,o,a),X=Object(x.a)(Q,2),tt=X[0];o=X[1],f+=tt,r+=tt}}catch(et){y.e(et)}finally{y.f()}return p.totalCosts+=u,p.totalTaxes+=f,U(p,n),t.push(p),[r,o]}function Q(t,e){var a,i=_.getInstance(),n={"SP5C.PAR":0,ESGE:0,SUSA:0},s={date:e,totalCosts:0,totalTaxes:0,newShares:Object(c.a)({},n),totalShares:Object(c.a)({},n),dividendNewShares:Object(c.a)({},n),dividendTotalShares:Object(c.a)({},n),totalInvestedMoney:Object(c.a)({},n),totalPayout:Object(c.a)({},n),newPayout:Object(c.a)({},n),sharePrizes:Object(c.a)({},n),newInvestedMoney:Object(c.a)({},n),newInvestment:0,inflation:0},r=Object(b.a)(Object.keys(t));try{for(r.s();!(a=r.n()).done;){var o=a.value;s.newShares[o]=0,s.totalShares[o]=0,s.dividendNewShares[o]=0,s.dividendTotalShares[o]=0,s.totalInvestedMoney[o]=0,s.totalPayout[o]=0,s.newPayout[o]=0,s.newInvestedMoney[o]=0,s.sharePrizes[o]=i.predictCourse(o,e)}}catch(l){r.e(l)}finally{r.f()}return s}var X=function(){function t(e,a,i,n,s,r,o,l,h,d){Object(u.a)(this,t),this.startCapital=void 0,this.monthlyInvestment=void 0,this.yearlyInvestmentIncrease=void 0,this.monthlyPayout=void 0,this.yearlyPayoutIncrease=void 0,this.savingPhaseLength=void 0,this.etfToRatio=void 0,this.configOptions=void 0,this.expectationOfLife=void 0,this.age=void 0,this.savingDates=[],this.payoutDates=[],this.initialDate=new Date,this.investmentSteps=[],this.startCapital=e,this.monthlyInvestment=a,this.monthlyPayout=n,this.savingPhaseLength=r,this.etfToRatio=o,this.configOptions=l,this.expectationOfLife=d,this.age=h,this.yearlyInvestmentIncrease=i,this.yearlyPayoutIncrease=s,this._calculateDatesForModel(),this._calculateModel()}return Object(f.a)(t,[{key:"_calculateDatesForModel",value:function(){for(var t=function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=e-t,s=new Date,r=new Date(s.getFullYear(),s.getMonth()+1),o=new Date(r);o.setFullYear(r.getFullYear()+a);var l=new Date(r);return l.setFullYear(r.getFullYear()+n+i),[r,o,l]}(this.age,this.expectationOfLife,this.savingPhaseLength),e=Object(x.a)(t,3),a=e[0],i=e[1],n=e[2],s=[],r=a;r<i;r=W(r))s.push(r);this.savingDates=s;for(var o=[],l=i;l<n;l=W(l))o.push(l);this.payoutDates=o,this.initialDate=a}},{key:"_calculateModel",value:function(){var t=[Q(this.etfToRatio,this.savingDates[0])];Z(t,this.monthlyInvestment+this.startCapital,this.savingDates[0],this.initialDate,this.etfToRatio,this.configOptions);for(var e=1;e<this.savingDates.length;e++){Z(t,J(this.monthlyInvestment,this.yearlyInvestmentIncrease,e),this.savingDates[e],this.initialDate,this.etfToRatio,this.configOptions)}for(var a=(t=t.slice(1))[t.length-1].totalTaxes,i=this.configOptions.taxFreeAmount,n={"SP5C.PAR":{investmentStepsIdx:0,alreadySoldShares:0},ESGE:{investmentStepsIdx:0,alreadySoldShares:0},SUSA:{investmentStepsIdx:0,alreadySoldShares:0}},s=0;s<this.payoutDates.length;s++){var r=$(t,J(this.monthlyPayout,this.yearlyPayoutIncrease,s),this.etfToRatio,this.payoutDates[s],this.initialDate,this.configOptions,a,i,n),o=Object(x.a)(r,2);a=o[0],i=o[1]}this.investmentSteps=t}},{key:"getInvestmentSteps",value:function(t){if(!Number.isInteger(O/t))throw new Error("The numberOfEntriesPerYear need to be dividable by ".concat(O," in order to make sense."));if(t===O)return this.investmentSteps;for(var e=[],a=O/t,i=0;i<this.investmentSteps.length;i+=a){for(var n=z()(this.investmentSteps[i]),s=1;s<a;s++){n.newInvestment+=this.investmentSteps[i+s].newInvestment;var r,o=Object(b.a)(Object.keys(this.investmentSteps[i+s].newPayout));try{for(o.s();!(r=o.n()).done;){var l=r.value;n.newPayout[l]+=this.investmentSteps[i+s].newPayout[l]}}catch(h){o.e(h)}finally{o.f()}}e.push(n)}return e}},{key:"getPayoutPhaseBeginDate",value:function(){return this.payoutDates[0]}}]),t}(),tt=a(12),et=a(10),at=5e6,it=1e6;function nt(t){return t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace(/(?!^)([A-Z]|\d+)/g," $1"),"".concat(t,":")}var st=function(){function t(e,a,i,n,s,r){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1100,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:300,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:200,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:40;if(Object(u.a)(this,t),this.tooltipDate=void 0,this.yExtent=void 0,this.lineStrokeWidth=3,this.standardFontSize=18,this.contentOpacity=.7,this.labelValueIdentifier="value",this.monospaceFont="monospace",this.investmentSteps=void 0,this.dateExtent=[new Date,new Date],this.marginW=void 0,this.marginH=void 0,this.width=void 0,this.height=void 0,this.maxIndex=0,this.minIndex=0,this.yScale=S.k(),this.xScale=S.l(),this.dataArray=[],this.textProperties={},this.payoutPhaseStartDate=void 0,this.svg=void 0,this.fadeOutGradientID="fadeOutGradient",this.fadeOutYearsLength=10,this.gridOpacity=.2,this.gridColor="grey",this.gridStrokeWidth=2,this.hoverLine=void 0,this.interaction=void 0,this.textGroup=void 0,this.xAxis=void 0,this.yAxis=void 0,this.constructor===t)throw new Error("Abstract classes can't be instantiated.");t.activeStrategies.push(this),this.investmentSteps=e,this.payoutPhaseStartDate=i,this.tooltipDate=null!=s?s:new Date(0),this.yExtent=null!=r?r:[0,0],this.marginW=h,this.marginH=d,this.width=o,this.height=l,a.innerHTML="",this.svg=S.m(a).append("svg").attr("id",n).attr("viewBox","0 0 ".concat(this.width+2*this.marginW," ").concat(this.height+2*this.marginH)).append("g").attr("transform","translate(".concat([this.marginW/2,this.marginH],")")),this.textGroup=this.svg,this.interaction=this.svg,this.hoverLine=this.svg.append("line"),this.yAxis=S.c(this.yScale),this.xAxis=S.b(this.xScale)}return Object(f.a)(t,[{key:"render",value:function(){this._prepareData(),this._calculateExtents(),this._createScales(),this._createAxis(),this._drawGrid(),this._drawContent(),this._drawFadeOut(),this._prepareText(),this._drawText(),this._drawAxis(),this._addInteraction(),this.tooltipDate>=this.dateExtent[0]&&this.tooltipDate<=this.dateExtent[1]&&this._updateAllDiagrams()}},{key:"valueToDisplayText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Math.max(-this.yExtent[0],this.yExtent[1])>=at?it:1e3,i=a===it?"M":"K";return e&&null!=t&&(t=Math.abs(t)),"".concat(null!=t?(t/a).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}):" - ").concat(i," \u20ac")}},{key:"_calculateExtents",value:function(){var t=this;this.dateExtent=S.f(this.dataArray[0],(function(t){return t.date}));var e=new Date(this.payoutPhaseStartDate);if(e.setMonth(e.getMonth()+O),0===this.yExtent[0]&&0===this.yExtent[1]){var a=this.dataArray[this.maxIndex].filter((function(a){return a.date<=e&&a.date>t.dateExtent[0]})),i=this.dataArray[this.minIndex].filter((function(t){return t.date<=e})),n=S.h(a.map((function(t){return t.yStart}))),s=S.i(i.map((function(t){return t.yEnd})));this.yExtent=[s,n]}}},{key:"_createScales",value:function(){this.yScale=S.k().domain(this.yExtent).range([this.height,0]),this.xScale=S.l().domain(this.dateExtent).range([0,this.width])}},{key:"_createAxis",value:function(){var t=this;this.yAxis=S.c(this.yScale).tickFormat((function(e){return t.valueToDisplayText(e)})).ticks(6),this.xAxis=S.b(this.xScale)}},{key:"_drawGrid",value:function(){var t=this,e=this.svg.append("g").attr("class","grid"),a=e.append("g").attr("class","yGrid"),i=e.append("g").attr("class","xGrid");a.selectAll("line").data(this.yScale.ticks(6)).enter().append("line").attr("x1",this.xScale(this.dateExtent[0])).attr("y1",(function(e){return t.yScale(e)})).attr("x2",this.xScale(this.dateExtent[1])).attr("y2",(function(e){return t.yScale(e)})).style("stroke-width",this.gridStrokeWidth).style("stroke",this.gridColor).style("opacity",this.gridOpacity),console.log(this.xScale.ticks()),i.selectAll("line").data(this.xScale.ticks()).enter().append("line").attr("x1",(function(e){return t.xScale(e)})).attr("y1",this.yScale(this.yExtent[0])).attr("x2",(function(e){return t.xScale(e)})).attr("y2",this.yScale(this.yExtent[1])).style("stroke-width",this.gridStrokeWidth).style("stroke",this.gridColor).style("opacity",this.gridOpacity)}},{key:"_drawAxis",value:function(){this.svg.append("g").style("font-size","20px").call(this.yAxis),this.svg.append("g").style("font-size","20px").attr("transform","translate(0, ".concat(this.height,")")).call(this.xAxis),this.svg.append("g").append("line").attr("x1",this.xScale(this.dateExtent[0])).attr("y1",this.yScale(0)).attr("x2",this.xScale(this.dateExtent[1])).attr("y2",this.yScale(0)).style("stroke-width",this.lineStrokeWidth).style("stroke","black"),this.svg.append("g").append("line").attr("x1",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y1",this.yScale(this.yExtent[0])).attr("x2",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y2",this.yScale(this.yExtent[1])).style("stroke-width",this.lineStrokeWidth).style("stroke","black")}},{key:"_addInteraction",value:function(){var e=this;this.interaction=this.svg.append("g").attr("class","interaction").style("visibility","hidden").attr("transform","translate(".concat([0,-this.marginH],")")),this.hoverLine=this.interaction.append("line").attr("class","tooltipLine").style("stroke","blue").style("stroke-dasharray","3,3").style("stroke-width",this.lineStrokeWidth).style("opacity",.5).attr("y1",this.height+2*this.marginH).attr("y2",0),this.svg.append("rect").attr("class","mouseEvent").attr("transform","translate(".concat([0,-this.marginH],")")).attr("height",this.height+2*this.marginH).attr("width",this.width).attr("fill","none").style("pointer-events","all").on("mouseover",(function(){return t._setInteractionVisibilityForActiveDiagrams("visible")})).on("mousemove",(function(t){return e._handleTooltipEvent(t)}))}},{key:"_handleTooltipEvent",value:function(t){var e=S.j(t)[0],a=this.xScale.invert(e);this.tooltipDate=V(a),this._updateAllDiagrams()}},{key:"_updateAllDiagrams",value:function(){var e=function(t,e){var a=e[0].date,i=e[1].date,n=(t.getFullYear()-a.getFullYear())*O+(t.getMonth()-a.getMonth()),s=(i.getFullYear()-a.getFullYear())*O+(i.getMonth()-a.getMonth());return Math.floor(n/s)}(this.tooltipDate,this.investmentSteps);t._setInteractionVisibilityForActiveDiagrams("visible");var a,i=Object(b.a)(t.activeStrategies);try{for(i.s();!(a=i.n()).done;){var n=a.value;n.hoverLine.attr("x1",this.xScale(this.tooltipDate)).attr("x2",this.xScale(this.tooltipDate)),n._updateTooltip(e),n._updateDiagram()}}catch(s){i.e(s)}finally{i.f()}}},{key:"_drawText",value:function(){this.textGroup=this.svg.append("g").attr("class","textGroup"),this.textGroup.selectAll("text").data(Object.values(this.textProperties)).enter().append("text").text((function(t){return t.text})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).style("font-size",(function(t){return t.fontSize})).style("font-family",(function(t){return t.fontFamily})).style("font-weight",(function(t){return t.fontWeight})).style("text-anchor",(function(t){return t.textAnchor})).style("fill",(function(t){return t.color}))}},{key:"_updateDiagram",value:function(){this.textGroup.selectAll("text").text((function(t){return t.text}))}},{key:"_prepareText",value:function(){var t=this.xScale(this.dateExtent[0])+(this.xScale(this.payoutPhaseStartDate)-this.xScale(this.dateExtent[0]))/2,e=this.xScale(this.payoutPhaseStartDate)+(this.xScale(this.dateExtent[1])-this.xScale(this.payoutPhaseStartDate))/2,a=-10;this.textProperties={savingBold:{text:"SAVING",x:t,y:a,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"end",fontWeight:"bold",color:"black"},savingPhase:{text:"Phase",x:t,y:a,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:"black"},payoutBold:{text:"PAYOUT",x:e,y:a,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"end",fontWeight:"bold",color:"black"},payoutPhase:{text:"Phase",x:e,y:a,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:"black"}}}},{key:"_drawFadeOut",value:function(){var t=this.svg.append("g").attr("class","fadeOut"),e=new Date(this.dateExtent[1]);e.setFullYear(e.getFullYear()-this.fadeOutYearsLength);var a=t.append("linearGradient").attr("id",this.fadeOutGradientID);a.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","white").attr("stop-opacity",0),a.append("stop").attr("class","end").attr("offset","100%").attr("stop-color","white").attr("stop-opacity",1),t.append("rect").attr("x",this.xScale(e)).attr("y",-this.marginH).attr("width",this.xScale(this.dateExtent[1])-this.xScale(e)+1).attr("height",this.yScale(this.yExtent[0])-this.yScale(this.yExtent[1])+2*this.marginH).style("fill","url(#".concat(this.fadeOutGradientID,")"))}}],[{key:"reset",value:function(){t.activeStrategies=[]}},{key:"_setInteractionVisibilityForActiveDiagrams",value:function(e){var a,i=Object(b.a)(t.activeStrategies);try{for(i.s();!(a=i.n()).done;){a.value.interaction.style("visibility",e)}}catch(n){i.e(n)}finally{i.f()}}}]),t}();st.activeStrategies=[];var rt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t,i,n,s,r,o,l){var h;Object(u.a)(this,a),(h=e.call(this,t,i,n,"firstSVG",s,r)).etfLineColors={"SP5C.PAR":{total:"#0562a0",invested:"#71c1f7"},ESGE:{total:"#ff1eff",invested:"#ff63ff"},SUSA:{total:"#23ff01",invested:"#7dff69"}},h.colors={inflation:"#ff7f00",totalCosts:"#be3bff",totalTaxes:"#e31a1c"},h.valueTextOffset=200,h.negativeLabels=["totalCosts","totalTaxes","inflation"],h.investedIdentifier="invested",h.capitalIdentifier="capital",h.totalIdentifier="total",h.totalColor="#ff557f",h.etfIdentifiers=void 0,h.dataToIndex={},h.subtractInflationFromTotal=void 0,h.subtractInflationFromTotal=l,h.etfIdentifiers=[];var d,c=Object(b.a)(Object.keys(o));try{for(c.s();!(d=c.n()).done;){var f=d.value,v=o[f];null!=v&&v>0&&h.etfIdentifiers.push(f)}}catch(p){c.e(p)}finally{c.f()}return h}return Object(f.a)(a,[{key:"_prepareData",value:function(){this.dataToIndex={totalCosts:0,totalTaxes:1,inflation:2};var t,e=3,a=Object(b.a)(this.etfIdentifiers);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.dataToIndex[i+this.investedIdentifier]=e++,this.dataToIndex[i+this.capitalIdentifier]=e++}}catch(v){a.e(v)}finally{a.f()}this.minIndex=this.dataToIndex.inflation,this.maxIndex=e-1,this.dataArray=[];for(var n=0;n<e;n++)this.dataArray.push([]);var s,r=Object(b.a)(this.investmentSteps);try{for(r.s();!(s=r.n()).done;){var o=s.value;this.dataArray[this.dataToIndex.totalCosts].push({yStart:0,yEnd:-o.totalCosts,date:o.date,color:this.colors.totalCosts}),this.dataArray[this.dataToIndex.totalTaxes].push({yStart:-o.totalCosts,yEnd:-o.totalCosts-o.totalTaxes,date:o.date,color:this.colors.totalTaxes}),this.dataArray[this.dataToIndex.inflation].push({yStart:-o.totalCosts-o.totalTaxes,yEnd:-o.totalCosts-o.totalTaxes-o.inflation,date:o.date,color:this.colors.inflation});var l,h=0,d=Object(b.a)(this.etfIdentifiers);try{for(d.s();!(l=d.n()).done;){var c=l.value,u=L(c,o),f=G(c,o);this.dataArray[this.dataToIndex[c+this.capitalIdentifier]].push({yStart:u+h,yEnd:u-f+h,date:o.date,color:this.etfLineColors[c].total}),this.dataArray[this.dataToIndex[c+this.investedIdentifier]].push({yStart:u-f+h,yEnd:h,date:o.date,color:this.etfLineColors[c].invested}),h+=u}}catch(v){d.e(v)}finally{d.f()}}}catch(v){r.e(v)}finally{r.f()}}},{key:"_drawLines",value:function(){var t=this;this.svg.append("path").datum(this.dataArray[this.dataArray.length-1]).style("stroke",this.totalColor).style("stroke-width",this.lineStrokeWidth).style("fill","none").attr("d",S.g().x((function(e){return t.xScale(e.date)})).y((function(e,a){return t.yScale(e.yStart+(t.subtractInflationFromTotal?t.dataArray[t.dataToIndex.inflation][a].yEnd:0))})))}},{key:"_drawContent",value:function(){this._drawArea(),this._drawLines()}},{key:"_drawArea",value:function(){for(var t=this,e=0;e<this.dataArray.length;e++)this.svg.append("g").attr("class","area").append("path").datum(this.dataArray[e]).style("opacity",this.contentOpacity).style("fill",(function(t){return t[0].color})).attr("d",S.a().curve(S.e).x((function(e){return t.xScale(e.date)})).y0((function(e){return t.yScale(e.yEnd)})).y1((function(e){return t.yScale(e.yStart)})))}},{key:"_prepareText",value:function(){Object(tt.a)(Object(et.a)(a.prototype),"_prepareText",this).call(this);for(var t=.005*this.width,e=.35*this.standardFontSize,i=0;i<this.negativeLabels.length;i++)this.textProperties[this.negativeLabels[i]]={text:nt(this.negativeLabels[i]),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)+(this.standardFontSize+e)*(i+1),fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:this.colors[this.negativeLabels[i]]},this.textProperties[this.negativeLabels[i]+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.xScale(this.dateExtent[1])+t+this.valueTextOffset,y:this.yScale(0)+(this.standardFontSize+e)*(i+1),fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.colors[this.negativeLabels[i]]};for(var n=0;n<this.etfIdentifiers.length;n++)this.textProperties[this.etfIdentifiers[n]]={text:Yt[this.etfIdentifiers[n]],x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)-(this.standardFontSize+e)*n*3-2*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:this.etfLineColors[this.etfIdentifiers[n]].total},this.textProperties[this.etfIdentifiers[n]+this.totalIdentifier]={text:nt(this.totalIdentifier),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)-(this.standardFontSize+e)*n*3-1*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:this.etfLineColors[this.etfIdentifiers[n]].total},this.textProperties[this.etfIdentifiers[n]+this.labelValueIdentifier+this.totalIdentifier]={text:this.valueToDisplayText(void 0),x:this.xScale(this.dateExtent[1])+t+this.valueTextOffset,y:this.yScale(0)-(this.standardFontSize+e)*n*3-1*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.etfLineColors[this.etfIdentifiers[n]].total},this.textProperties[this.etfIdentifiers[n]+this.investedIdentifier]={text:nt(this.investedIdentifier),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)-(this.standardFontSize+e)*n*3-0*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:this.etfLineColors[this.etfIdentifiers[n]].invested},this.textProperties[this.etfIdentifiers[n]+this.labelValueIdentifier+this.investedIdentifier]={text:this.valueToDisplayText(void 0),x:this.xScale(this.dateExtent[1])+t+this.valueTextOffset,y:this.yScale(0)-(this.standardFontSize+e)*n*3-0*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.etfLineColors[this.etfIdentifiers[n]].invested};this.textProperties[this.totalIdentifier]={text:nt(this.totalIdentifier),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(this.yExtent[1]),fontSize:this.standardFontSize,fontFamily:null,textAnchor:"start",fontWeight:"normal",color:this.totalColor},this.textProperties[this.totalIdentifier+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.xScale(this.dateExtent[1])+t+this.valueTextOffset,y:this.yScale(this.yExtent[1]),fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.totalColor}}},{key:"_updateTooltip",value:function(t){var e,a=Object(b.a)(this.etfIdentifiers);try{for(a.s();!(e=a.n()).done;){var i=e.value,n=L(i,this.investmentSteps[t]),s=n-G(i,this.investmentSteps[t]);this.textProperties[i+this.labelValueIdentifier+this.investedIdentifier].text=this.valueToDisplayText(s,!0),this.textProperties[i+this.labelValueIdentifier+this.totalIdentifier].text=this.valueToDisplayText(n,!0)}}catch(f){a.e(f)}finally{a.f()}var r,o=Object(b.a)(this.negativeLabels);try{for(o.s();!(r=o.n()).done;){var l=r.value,h=this.investmentSteps[t][l];this.textProperties[l+this.labelValueIdentifier].text=this.valueToDisplayText(h,!0)}}catch(f){o.e(f)}finally{o.f()}var d,c=0,u=Object(b.a)(this.etfIdentifiers);try{for(u.s();!(d=u.n()).done;){c+=L(d.value,this.investmentSteps[t])}}catch(f){u.e(f)}finally{u.f()}c-=this.subtractInflationFromTotal?this.investmentSteps[t].inflation:0,this.textProperties[this.totalIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(c)}}]),a}(st);function ot(t){var e,a=0,i=Object(b.a)(Object.keys(t.newPayout));try{for(i.s();!(e=i.n()).done;){var n=e.value;a+=t.newPayout[n]}}catch(s){i.e(s)}finally{i.f()}return a}var lt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t,i,n,s,r){var o;return Object(u.a)(this,a),(o=e.call(this,t,i,n,"secondSVG",s,r)).barPaddingPercentage=.9,o.payoutIdentifier="payout",o.investedIdentifier="invested",o.maxNumberTextLength=100,o.colors={payout:{first:"#3acc5c",second:"#2d9e45"},invested:{first:"#ff3e58",second:"#c32f46"}},o.rectWidth=0,o}return Object(f.a)(a,[{key:"_prepareData",value:function(){var t=0,e=1;this.minIndex=t,this.maxIndex=e,this.dataArray=[[],[]];var a,i=this.investmentSteps[0].date.getFullYear(),n=Object(b.a)(this.investmentSteps);try{for(n.s();!(a=n.n()).done;){var s=a.value,r=ot(s),o=(s.date.getFullYear()-i)%2===0?"first":"second";this.dataArray[t].push({yStart:0,yEnd:-s.newInvestment,date:s.date,color:this.colors.invested[o]}),this.dataArray[e].push({yStart:r,yEnd:0,date:s.date,color:this.colors.payout[o]})}}catch(l){n.e(l)}finally{n.f()}this.rectWidth=this.width/this.dataArray[t].length*this.barPaddingPercentage}},{key:"_prepareText",value:function(){Object(tt.a)(Object(et.a)(a.prototype),"_prepareText",this).call(this);var t=this.xScale(this.payoutPhaseStartDate)+(this.xScale(this.dateExtent[1])-this.xScale(this.payoutPhaseStartDate))/2,e=this.yScale(0)+(this.yScale(this.yExtent[0])-this.yScale(0))/2;this.textProperties[this.payoutIdentifier]={text:this.payoutIdentifier,x:t,y:e,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"end",fontWeight:"normal",color:this.colors[this.payoutIdentifier].first},this.textProperties[this.payoutIdentifier+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:t+this.maxNumberTextLength,y:e,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.colors[this.payoutIdentifier].first};var i=this.xScale(this.dateExtent[0])+(this.xScale(this.payoutPhaseStartDate)-this.xScale(this.dateExtent[0]))/2,n=this.yScale(0)-(this.yScale(0)-this.yScale(this.yExtent[1]))/2;this.textProperties[this.investedIdentifier]={text:this.investedIdentifier,x:i,y:n,fontSize:this.standardFontSize,fontFamily:null,textAnchor:"end",fontWeight:"normal",color:this.colors[this.investedIdentifier].first},this.textProperties[this.investedIdentifier+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:i+this.maxNumberTextLength,y:n,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:"end",fontWeight:"bold",color:this.colors[this.investedIdentifier].first}}},{key:"_updateTooltip",value:function(t){var e=ot(this.investmentSteps[t]),a=this.investmentSteps[t].newInvestment;this.textProperties[this.payoutIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(e),this.textProperties[this.investedIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(a)}},{key:"_drawContent",value:function(){var t,e=this,a=this.dataArray[0][this.dataArray[0].length-1].date===this.dateExtent[1],i=Object(b.a)(this.dataArray);try{for(i.s();!(t=i.n()).done;){var n=t.value;a&&(n=n.slice(0,-1)),this.svg.append("g").attr("class","bars").selectAll("rect.none").data(n).enter().append("rect").style("fill",(function(t){return t.color})).attr("x",(function(t){return e.xScale(t.date)})).attr("width",this.rectWidth).attr("y",(function(t){return e.yScale(t.yStart)})).attr("height",(function(t){return e.yScale(t.yEnd)-e.yScale(t.yStart)})).style("opacity",this.contentOpacity)}}catch(s){i.e(s)}finally{i.f()}}}]),a}(st),ht=a(1),dt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(){var t;Object(u.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).firstSVGRef=n.a.createRef(),t.secondSVGRef=n.a.createRef(),t.areaChart=void 0,t.barChart=void 0,t.investmentModel=void 0,t}return Object(f.a)(a,[{key:"_getETFIdentifierToRatio",value:function(){var t={},e=this.props.etfDropdownSelection.elements;for(var a in e)e[a].selected&&(t[e[a].symbol]=w(e[a].value));return t}},{key:"_getInvestmentModel",value:function(t){var e={taxFreeAmount:C(this.props[Pt].value),costConfig:Lt(this.props)};return new X(C(this.props[St].value),C(this.props[jt].value),w(this.props[Ot].value),C(this.props[Dt].value),w(this.props[kt].value),C(this.props[It].value),t,e,C(this.props[Tt].value),C(this.props[At].value))}},{key:"_getTooltipDate",value:function(){return null!=this.areaChart?this.areaChart.tooltipDate:null!=this.barChart?this.barChart.tooltipDate:void 0}},{key:"_getYAxisExtent",value:function(t){return null!=t&&this.props[Vt].value?t.yExtent:void 0}},{key:"_drawVisualization",value:function(){st.reset();try{if(null!=this.props.isValid&&this.props.isValid&&null!=this.firstSVGRef.current&&null!=this.secondSVGRef.current){var t=this._getETFIdentifierToRatio();this.investmentModel=this._getInvestmentModel(t);var e=this.investmentModel.getPayoutPhaseBeginDate(),a=this.investmentModel.getInvestmentSteps(this.props[Ft].value),i=this._getTooltipDate();this.areaChart=new rt(a,this.firstSVGRef.current,e,i,this._getYAxisExtent(this.areaChart),t,this.props[_t].value),this.areaChart.render(),this.barChart=new lt(a,this.secondSVGRef.current,e,i,this._getYAxisExtent(this.barChart)),this.barChart.render()}}catch(n){console.error(n)}}},{key:"componentDidMount",value:function(){this._drawVisualization()}},{key:"componentDidUpdate",value:function(){this._drawVisualization()}},{key:"render",value:function(){return Object(ht.jsxs)(n.a.Fragment,{children:[Object(ht.jsx)("div",{ref:this.secondSVGRef}),Object(ht.jsx)("div",{ref:this.firstSVGRef})]})}}]),a}(n.a.Component);function ct(t){return Object(ht.jsx)("div",{id:t.identifier+"Feedback",className:"invalid-tooltip",style:{visibility:t.isValid?"hidden":"visible"},children:t.errorMessage})}function ut(t){return Object(ht.jsxs)("div",{className:"position-relative",children:[Object(ht.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label}),Object(ht.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(e.target.value.split(" ")[0],t.identifier)},disabled:t.disabled}),Object(ht.jsx)(ct,Object(c.a)({},t))]})}function ft(t){return Object(ht.jsxs)("div",{className:"position-relative",children:[Object(ht.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label}),Object(ht.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(e.target.value.split(" ")[0],t.identifier)},disabled:t.disabled}),Object(ht.jsx)(ct,Object(c.a)({},t))]})}function vt(t){return Object(ht.jsxs)("div",{className:"checkbox-element",children:[Object(ht.jsx)("input",{className:"form-check-input",id:t.identifier,type:"checkbox",value:t.value.toString(),onChange:function(){return t.onValueChange(t.identifier)}}),Object(ht.jsx)("label",{className:"form-check-label",htmlFor:t.identifier,children:t.label})]})}function pt(t){return Object(ht.jsx)("div",{className:"row",children:Object(ht.jsx)("div",{className:"col-12 p-0",children:Object(ht.jsx)("div",{className:"d-grid gap-0",children:Object(ht.jsxs)("div",{className:"overlay min-vh-100 text-center m-0 d-flex flex-column justify-content-center",style:{visibility:t.displayOverlay?"visible":"hidden"},children:[Object(ht.jsxs)("h1",{className:"p-5",children:["Enter your personal"," ",Object(ht.jsxs)("a",{href:"https://www.alphavantage.co/support/#api-key",target:"_blank",rel:"noopener noreferrer",children:[" ","Alphavantage API Key"]})," "]}),Object(ht.jsx)(ut,Object(c.a)(Object(c.a)({},t),{},{disabled:!t.displayOverlay})),Object(ht.jsx)("button",{type:"button",className:"btn btn-primary my-5",onClick:t.handleAPIKeyConfirm,children:"Confirm"})]})})})})}function yt(t){var e=t.title.replace(/\W/g,"_");return Object(ht.jsxs)("div",{className:"position-relative my-4 mb-1",children:[Object(ht.jsxs)("div",{className:"d-flex my-3",children:[Object(ht.jsx)("button",{className:"btn btn-secondary hamburgerButton mt-0 mb-0 pt-0 pb-0 me-4",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e),"aria-expanded":t.initiallyCollapsed?"false":"true","aria-controls":e,children:"\u2630"}),Object(ht.jsx)("h6",{className:"sidebar-heading m-0 my-auto",children:t.title})]}),Object(ht.jsx)("div",{className:"collapse "+(t.initiallyCollapsed?"":"show"),id:e,children:t.children})]})}function xt(t,e){return e.fixedCosts===t.fixedCosts&&e.percentageCosts===t.percentageCosts}function bt(t){return Object(ht.jsxs)("div",{className:"dropdown",children:[Object(ht.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"BrokerDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ht.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"BrokerDropDown",children:t.elements.map((function(e){return Object(ht.jsx)("li",{children:Object(ht.jsx)("button",{className:xt(t,e)?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function gt(t){return Object(ht.jsxs)("div",{className:"dropdown",children:[Object(ht.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"GraphDetailDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ht.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"GraphDetailDropDown",children:t.elements.map((function(e){return Object(ht.jsx)("li",{children:Object(ht.jsx)("button",{className:t.value===e.value?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function mt(t){return Object(ht.jsxs)("div",{className:"dropdown position-relative",children:[Object(ht.jsx)("button",{className:"btn btn-secondary dropdown-toggle is-invalid",type:"button",id:"ETFSelectionDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ht.jsx)(ct,Object(c.a)({},t)),Object(ht.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"ETFSelectionDropDown",children:Object.keys(t.elements).map((function(e){return Object(ht.jsx)("li",{children:Object(ht.jsx)("button",{className:t.elements[e].selected?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){a.target instanceof HTMLInputElement||t.handleSelectionChange(t.elements[e])},children:Object(ht.jsx)(ft,Object(c.a)(Object(c.a)({},t.elements[e]),{},{value:t.elements[e].value,textAppending:"%",onValueChange:t.handleShareChange,disabled:t.autoPercentage,isValid:!0,errorMessage:""}))})},e)}))})]})}var St="startingCapital",jt="monthlyInvestment",Ot="yearlyInvestmentIncrease",Ct="transactionCosts",wt="transactionCostsType",It="savingPhase",Tt="age",Pt="taxFreeAmount",Dt="monthlyPayout",kt="yearlyPayoutIncrease",At="lifeExpectation",Ft="detailedGraph",Et="etfDropdownSelection",Mt="apiKey",Vt="yAxisLock",_t="inflationUsedForTotal",Nt="brokerDropdown",zt="etfAutomaticPercentage",Yt={"SP5C.PAR":"S & P 500",ESGE:"iShare",SUSA:"MSCI USA ESG"};function Lt(t){return t.transactionCostsType.value?{percentageCosts:0,fixedCosts:C(t.transactionCosts.value)}:{percentageCosts:w(t.transactionCosts.value),fixedCosts:0}}function Gt(t){var e=0;for(var a in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[a].selected&&e++;var i=100/Math.max(1,e);for(var n in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[n].selected&&(t.etfDropdownSelection.elements[n].value=i.toString());return t}var Rt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t){var i;return Object(u.a)(this,a),(i=e.call(this,t)).handleTextChange=i.handleTextChange.bind(Object(v.a)(i)),i.handleCheckBoxChange=i.handleCheckBoxChange.bind(Object(v.a)(i)),i.handleBrokerChange=i.handleBrokerChange.bind(Object(v.a)(i)),i.handleGraphDetailChange=i.handleGraphDetailChange.bind(Object(v.a)(i)),i.handleETFSelectionChange=i.handleETFSelectionChange.bind(Object(v.a)(i)),i.handleETFShareChange=i.handleETFShareChange.bind(Object(v.a)(i)),i.handleAPIKeyConfirm=i.handleAPIKeyConfirm.bind(Object(v.a)(i)),i.state=function(t){var e;return e={isValid:!0},Object(h.a)(e,St,{value:"1000",label:"Starting Capital",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:St,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,jt,{value:"100",label:"Monthly Investment",errorMessage:"Please enter a positive Money amount.",textAppending:"\u20ac",isValid:!0,identifier:jt,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,Ot,{value:"0.0",label:"Yearly Investment Increase",errorMessage:"",textAppending:"%",isValid:!0,identifier:Ot,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,Dt,{value:"1000",label:"Monthly Payout",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:Dt,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,kt,{value:"0.0",label:"Yearly Payout Increase",errorMessage:"",textAppending:"%",isValid:!0,identifier:kt,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,Ct,{value:"1.5",label:"Transaction Costs",errorMessage:"",textAppending:"%",isValid:!0,identifier:Ct,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,It,{value:"40",label:"Saving Phase",errorMessage:"",textAppending:"Y",isValid:!0,identifier:It,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,Tt,{value:"30",label:"Your Age",textAppending:"Y",errorMessage:"",isValid:!0,identifier:Tt,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,At,{value:"80",label:"Life Expectation",errorMessage:"",isValid:!0,textAppending:"Y",identifier:At,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,Pt,{value:"801",label:"Tax Free Amount",errorMessage:"",isValid:!0,textAppending:"\u20ac",identifier:Pt,onValueChange:t.handleTextChange,disabled:!1}),Object(h.a)(e,wt,{value:!1,label:"Fixed Amount",identifier:wt,onValueChange:t.handleCheckBoxChange}),Object(h.a)(e,zt,{value:!1,label:"Automatic ETF Ratio",identifier:zt,onValueChange:t.handleCheckBoxChange}),Object(h.a)(e,_t,{value:!1,label:"Subtract Inflation of Total",identifier:_t,onValueChange:t.handleCheckBoxChange}),Object(h.a)(e,Vt,{value:!1,label:"Lock Y Axis Extent",identifier:Vt,onValueChange:t.handleCheckBoxChange}),Object(h.a)(e,Mt,{displayOverlay:!0,error:!1,value:"",label:"",errorMessage:"",isValid:!0,textAppending:"",identifier:Mt,onValueChange:t.handleTextChange,handleAPIKeyConfirm:t.handleAPIKeyConfirm}),Object(h.a)(e,Ft,{value:1,label:"Graph Detail Level",isValid:!0,handleChange:t.handleGraphDetailChange,elements:[{identifier:"12",value:12,label:"All Months a Year (high detail)"},{identifier:"3",value:3,label:"Every 4th Month (middle detail)"},{identifier:"1",value:1,label:"One Month a Year (low detail)"}]}),Object(h.a)(e,Nt,{label:"Broker",isValid:!0,handleChange:t.handleBrokerChange,elements:[{identifier:"comdirect",label:"comdirect",fixedCosts:0,percentageCosts:1.5},{identifier:"tradeRepublic",label:"Trade Republic",fixedCosts:0,percentageCosts:1},{identifier:"eToro",label:"eToro",fixedCosts:0,percentageCosts:0}]}),Object(h.a)(e,Et,{label:"ETF Selection",isValid:!0,identifier:Et,errorMessage:"",handleSelectionChange:t.handleETFSelectionChange,handleShareChange:t.handleETFShareChange,elements:{S_and_P_500:{identifier:"S_and_P_500",symbol:"SP5C.PAR",label:Yt["SP5C.PAR"],value:"100",selected:!0},iShare:{identifier:"iShare",symbol:"ESGE",label:Yt.ESGE,value:"100",selected:!1},msciUSA:{identifier:"msciUSA",symbol:"SUSA",label:Yt.SUSA,value:"100",selected:!1}}}),e}(Object(v.a)(i)),i}return Object(f.a)(a,[{key:"handleTextChange",value:function(t,e){var a=Object(c.a)({},this.state);a[e].value=t,this._validateAndSetState(a)}},{key:"handleCheckBoxChange",value:function(t){var e=Object(c.a)({},this.state);e[t].value=!e[t].value,t===wt?(e.transactionCosts.value=e[t].value?"5":"0.015",e.transactionCosts.textAppending=e[t].value?"\u20ac":"%"):t===zt&&e[t].value&&Gt(e),this._validateAndSetState(e)}},{key:"handleBrokerChange",value:function(t){var e=Object(c.a)({},this.state);e.transactionCosts.value=t.percentageCosts>0?t.percentageCosts.toString():t.fixedCosts.toString(),e.transactionCostsType.value=!(t.percentageCosts>0),this._validateAndSetState(e)}},{key:"handleGraphDetailChange",value:function(t){var e=Object(c.a)({},this.state);e[Ft].value=t.value,this._validateAndSetState(e)}},{key:"handleETFSelectionChange",value:function(t){var e=Object(c.a)({},this.state);e.etfDropdownSelection.elements[t.identifier].selected=!e.etfDropdownSelection.elements[t.identifier].selected,e.etfAutomaticPercentage.value&&Gt(e),this._validateAndSetState(e)}},{key:"handleETFShareChange",value:function(t,e){var a=Object(c.a)({},this.state);a.etfDropdownSelection.elements[e].value=t,this._validateAndSetState(a)}},{key:"handleAPIKeyConfirm",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.apiKey.value,a=Object(c.a)({},this.state.apiKey),t.prev=2,t.next=5,_.loadHistoricData(e,this.state.etfDropdownSelection.elements);case 5:a.error=!1,a.displayOverlay=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a.error=!0;case 12:this.setState(Object(h.a)({},Mt,a)),this.forceUpdate();case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"_validateAndSetState",value:function(t){var e=[jt,Dt,St,Tt,At,It,Pt],a=[Ot,kt];t.isValid=!0;for(var i=0,n=e;i<n.length;i++){var s=n[i];t[s].isValid=T(t[s].value),t[s].errorMessage="Please enter a positive number.",t.isValid=t[s].isValid&&t.isValid}for(var r=0,o=a;r<o.length;r++){var l=o[r];t[l].isValid=I(t[l].value),t[l].errorMessage="Please enter a valid percentage between 0 and 100 %.",t.isValid=t[l].isValid&&t.isValid}var h=C(t[At].value)-C(t[Tt].value);h<=0?(t[Tt].errorMessage="You cannot be older than the life expectation",t[Tt].isValid=!1,t.isValid=!1):h<=C(t[It].value)&&(t[It].errorMessage="You cannot have a saving phase that lasts longer than your life.",t[It].isValid=!1,t.isValid=!1),t.transactionCostsType.value?(t.transactionCosts.isValid=T(t.transactionCosts.value),t.transactionCosts.errorMessage="Please enter a positive number."):(t.transactionCosts.isValid=I(t.transactionCosts.value),t.transactionCosts.errorMessage="Please enter a valid percentage."),t.isValid=t.transactionCosts.isValid&&t.isValid;var d=0,c=!1;for(var u in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[u].selected&&(d+=w(t.etfDropdownSelection.elements[u].value),c=!0);c?1!==d?(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="The sum of all selected ETFs need to be 100%.",t.isValid=!1):t.etfDropdownSelection.isValid=!0:(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="Please select at least one ETF.",t.isValid=!1),this.setState(t)}},{key:"render",value:function(){var t=Lt(this.state);return Object(ht.jsxs)("div",{className:"container-fluid",children:[Object(ht.jsx)(pt,Object(c.a)({},this.state.apiKey)),Object(ht.jsxs)("div",{className:"row",children:[Object(ht.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 bg-light sidebar",children:Object(ht.jsxs)("form",{className:"position-sticky needs-validation",noValidate:!0,children:[Object(ht.jsxs)(yt,{title:"Money Options",initiallyCollapsed:!1,children:[Object(ht.jsx)(ut,Object(c.a)({},this.state[St])),Object(ht.jsx)(ut,Object(c.a)({},this.state[jt])),Object(ht.jsx)(ut,Object(c.a)({},this.state[Ot])),Object(ht.jsx)(ut,Object(c.a)({},this.state[Dt])),Object(ht.jsx)(ut,Object(c.a)({},this.state[kt])),Object(ht.jsx)(ut,Object(c.a)({},this.state[Pt]))]}),Object(ht.jsxs)(yt,{title:"Time Options",initiallyCollapsed:!1,children:[Object(ht.jsx)(ut,Object(c.a)({},this.state[Tt])),Object(ht.jsx)(ut,Object(c.a)({},this.state[At])),Object(ht.jsx)(ut,Object(c.a)({},this.state[It]))]}),Object(ht.jsxs)(yt,{title:"Cost Options",initiallyCollapsed:!0,children:[Object(ht.jsx)(bt,Object(c.a)(Object(c.a)({},t),this.state.brokerDropdown)),Object(ht.jsx)(ut,Object(c.a)({},this.state.transactionCosts),Ct),Object(ht.jsx)(vt,Object(c.a)({},this.state.transactionCostsType))]}),Object(ht.jsxs)(yt,{title:"Visualization Options",initiallyCollapsed:!0,children:[Object(ht.jsx)(gt,Object(c.a)({},this.state[Ft])),Object(ht.jsx)(vt,Object(c.a)({},this.state[Vt])),Object(ht.jsx)(vt,Object(c.a)({},this.state[_t])),Object(ht.jsx)(vt,Object(c.a)({},this.state.etfAutomaticPercentage)),Object(ht.jsx)(mt,Object(c.a)({autoPercentage:this.state.etfAutomaticPercentage.value},this.state.etfDropdownSelection))]})]})}),Object(ht.jsxs)("main",{className:"col-md-9 col-lg-10 ms-sm-auto",children:[Object(ht.jsx)("h1",{children:"Etf Pension Plan Visualization"}),Object(ht.jsx)(dt,Object(c.a)({},this.state))]})]})]})}}]),a}(n.a.Component);var Wt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(e){var a=e.getCLS,i=e.getFID,n=e.getFCP,s=e.getLCP,r=e.getTTFB;a(t),i(t),n(t),s(t),r(t)}))};a(164);r.a.render(Object(ht.jsx)(n.a.StrictMode,{children:Object(ht.jsx)(Rt,{})}),document.getElementById("root")),Wt()}},[[165,1,2]]]);
//# sourceMappingURL=main.156cc192.chunk.js.map