(this["webpackJsonpetf-vis"]=this["webpackJsonpetf-vis"]||[]).push([[0],{159:function(t,e,i){},165:function(t,e,i){"use strict";i.r(e);var a=i(13),n=i.n(a),s=i(50),r=i.n(s),o=(i(159),i(10)),l=i.n(o),d=i(3),h=i(16),c=i(1),u=i(4),f=i(5),v=i(14),p=i(7),x=i(8),y=i(9),b=i(2),g=i(34),m=i.n(g),S=i(6),j=864e5,O=12;function T(t){return Number.isNaN(t)?0:t/100}function C(t){return!Number.isNaN(t)&&t>=0&&t<=100}function I(t){return 0===t.getMonth()}function w(t,e,i){return Math.max(e,Math.min(t,i))}function A(t,e){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(l.a.mark((function t(e,i){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.d("https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY_ADJUSTED&symbol=".concat(e,"&apikey=").concat(i,"&datatype=csv"),(function(t){if(void 0===t.timestamp||void 0===t["dividend amount"]||void 0===t["adjusted close"])throw new Error("The history of ".concat(e," contained an undefined field."));return{date:new Date(t.timestamp.toString()),dividend:parseFloat(t["dividend amount"]),course:parseFloat(t["adjusted close"])}}));case 2:return(a=t.sent).sort((function(t,e){return t.date.valueOf()-e.date.valueOf()})),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return t.map((function(t){return[k(t.date),t.course]}))}function F(t){var e=t[0].date.getFullYear(),i=[[e,0]];return t.forEach((function(t){t.date.getFullYear()===e?i[i.length-1][1]+=t.dividend:(e=t.date.getFullYear(),i.push([e,t.dividend]))})),i.sort((function(t,e){return t[0]-e[0]})),i}function k(t){return Math.floor(t.getTime()/j)}function V(t){return new Error("First call loadHistoricalDataIfNotPresent() before predicting: ".concat(t))}function M(t){var e,i,a=t.getDate(),n=(e=t.getMonth(),i=t.getFullYear(),new Date(i,e+1,0).getDate()),s=Math.round(a/n);return new Date(t.getFullYear(),t.getMonth()+s)}var E=function(){function t(){Object(u.a)(this,t),this.historicalData={},this.coursePredictors={},this.dividendPredictors={}}return Object(f.a)(t,[{key:"_loadAndCacheHistoricalETFData",value:function(){var e=Object(h.a)(l.a.mark((function e(i){var a,n,s,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i in this.historicalData)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A(i,t.apiKey);case 4:a=e.sent,n=D(a),s=t._calculateTimestampForPredictorRepetition(n),r=F(a),o=t._calculateTimestampForPredictorRepetition(r),this.historicalData[i]={history:a,courseForecastArray:n,dividendForecastArray:r},this.coursePredictors[i]={maxTimestampBeforeCoursePredictorRepetition:s,predictors:{}},this.dividendPredictors[i]={maxYearBeforeDividendPredictorRepetition:o,predictors:{}};case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCoursePredictorIfNotPresent",value:function(e,i){if(!(i in this.coursePredictors[e])){var a=this.historicalData[e].courseForecastArray,n=a[a.length-1][0]-Math.abs(a[a.length-1][0]-i)*t.backCastTimeFactor-t.backCastTimestampConstant,s=a.filter((function(t){return t[0]>=n}));this.coursePredictors[e].predictors[i]=m.a.linear(s,{order:2,precision:20})}}},{key:"_courseDateToPredictorTimestampAndDateTimestamp",value:function(t,e){var i=k(t);return[i>this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition?this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition:i,i]}},{key:"_createDividendPredictorIfNotPresent",value:function(e,i){if(!(i in this.dividendPredictors[e])){var a=this.historicalData[e].dividendForecastArray,n=a[a.length-1][0]-Math.abs(a[a.length-1][0]-i)*t.backCastTimeFactor-t.backCastTimestampConstant,s=a.filter((function(t){return t[0]>=n}));this.dividendPredictors[e].predictors[i]=m.a.linear(s,{order:2,precision:20})}}},{key:"_dividendYearToPredictorYear",value:function(t,e){return this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition<e?this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition:e}},{key:"predictCourse",value:function(t,e,i,a){if(!(t in this.coursePredictors))throw V(t);var n=this._courseDateToPredictorTimestampAndDateTimestamp(e,t),s=Object(y.a)(n,2),r=s[0],o=s[1],l=k(a);this._createCoursePredictorIfNotPresent(t,r);var d=this.coursePredictors[t].predictors[r].equation,h=2*(1-i-.5)*.5+1,c=d[0]*l+d[1];return d[0]*h*(o-l)+c}},{key:"predictDividend",value:function(t,e){if(!(t in this.dividendPredictors))throw V(t);var i=this._dividendYearToPredictorYear(t,e);return this._createDividendPredictorIfNotPresent(t,i),Math.max(0,this.dividendPredictors[t].predictors[i].predict(e)[1])}}],[{key:"configure",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;t.apiKey=e,t.backCastTimeFactor=i;var n=new Date(0);if(n.setMonth(a),t.backCastTimestampConstant=k(n),null!=t.instance){var s=t.getInstance();for(var r in s.coursePredictors)s.coursePredictors[r].maxTimestampBeforeCoursePredictorRepetition=t._calculateTimestampForPredictorRepetition(s.historicalData[r].courseForecastArray);for(var o in s.dividendPredictors)s.dividendPredictors[o].maxYearBeforeDividendPredictorRepetition=t._calculateTimestampForPredictorRepetition(s.historicalData[o].dividendForecastArray)}}},{key:"loadHistoricData",value:function(){var e=Object(h.a)(l.a.mark((function e(i,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.configure(i),n=t.getInstance(),e.t0=l.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=9;break}return s=e.t1.value,e.next=7,n._loadAndCacheHistoricalETFData(a[s].symbol);case 7:e.next=3;break;case 9:console.log("Finished loading the historic data.");case 10:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"_calculateTimestampForPredictorRepetition",value:function(e){var i=e[0][0],a=e[e.length-1][0];return a+(a-i)/t.backCastTimeFactor}}]),t}();E.instance=null,E.apiKey="",E.backCastTimestampConstant=7,E.backCastTimeFactor=2;var _=i(24),N=i.n(_),L=.7,z=.26375;function Y(t,e){return e.totalShares[t]*e.sharePrices[t]}function G(t,e){return e.dividendTotalShares[t]*e.sharePrices[t]}function R(t,e){return e.newShares[t]*e.sharePrices[t]}function W(t){var e,i=0,a=Object(b.a)(Object.keys(t.newPayout));try{for(a.s();!(e=a.n()).done;){var n=e.value;i+=t.newPayout[n]}}catch(s){a.e(s)}finally{a.f()}return i}function B(t){var e=new Date(t);return e.setMonth(t.getMonth()+1),e}function U(t,e,i,a){if(function(t){return 11===t.getMonth()}(e)){var n=E.getInstance().predictDividend(t,e.getFullYear()),s=E.getInstance().predictCourse(t,e,i,a);return n>0?n:.025*s}return 0}function H(t,e){var i=t*e.percentageCosts+e.fixedCosts,a=Math.max(t-i,0);return[a,i=t-a]}function K(t,e){return[Math.max(0,t-e),Math.max(0,e-t)]}function J(t){var e,i=0,a=Object(b.a)(Object.keys(t.totalShares));try{for(a.s();!(e=a.n()).done;){i+=Y(e.value,t)}}catch(n){a.e(n)}finally{a.f()}return i}function q(t,e){var i=J(t),a=t.date,n=a.getFullYear()-e.getFullYear()+(a.getMonth()-e.getMonth())/O;t.inflation=i-i*Math.pow(.99,n)}function Z(t,e,i){var a=Math.floor(i/O);return t*Math.pow(1+e,a)}function $(t,e,i,a){if(!I(e)||t.length<2)return[0,i];var n,s=0,r=t[t.length-1],o=t.length-O>1?t[t.length-O]:t[1],l=Object(b.a)(Object.keys(a));try{for(l.s();!(n=l.n()).done;){for(var d=n.value,h=r.distributingNewAmount[d],c=Y(d,o)*(O-o.date.getMonth())/O,u=1;u<O&&t.length-u>0;u++){c+=R(d,t[t.length-u])*u/O}if(!(h>=(c*=.0049))){var f=Y(d,r)-r.totalInvestedMoney[d],v=0;t.length>O&&(v=Math.max(0,Y(d,t[t.length-1-O])-t[t.length-1-O].totalInvestedMoney[d]));var p=w(f-v,0,c),x=K(p,i),g=Object(y.a)(x,2);p=g[0],i=g[1],s+=p*L*z}}}catch(m){l.e(m)}finally{l.f()}return[s,i]}function Q(t,e,i,a,n,s,r,o){I(i)&&(r=s.taxFreeAmount);var l=0,d=t[t.length-1],h=N()(d);h.date=i,h.newInvestment=0;var c,u=Object(b.a)(Object.keys(n));try{for(u.s();!(c=u.n()).done;){var f=c.value,v=n[f]*e;h.newInvestment+=v;var p=H(v,s.costConfig),x=Object(y.a)(p,2),g=x[0];l+=x[1],h.newInvestedMoney[f]=g,h.totalInvestedMoney[f]+=g;var m=E.getInstance().predictCourse(f,i,s.confidence,a),S=g/m;h.sharePrices[f]=m,h.newShares[f]=S;var j=U(f,i,s.confidence,a),O=h.totalShares[f]*j;if(o){h.distributingNewAmount[f]=O;var T,C=O,w=K(C,r),A=Object(y.a)(w,2);T=A[0],r=A[1];var P=T*L*z;h.totalTaxes+=P,O=C-P}var D=O/m;h.newShares[f]+=D,o||(h.dividendNewShares[f]=D,h.dividendTotalShares[f]+=D),h.totalShares[f]+=h.newShares[f],h.newPayout[f]=0}}catch(V){u.e(V)}finally{u.f()}h.totalCosts+=l;var F=$(t,i,s.taxFreeAmount,n),k=Object(y.a)(F,1)[0];return h.totalTaxes+=k,q(h,a),t.push(h),r}function X(t,e,i,a,n,s,r,o,l,d){I(a)&&(o=s.taxFreeAmount);var h=0,c=0,u=t[t.length-1],f=N()(u);f.date=a,f.newInvestment=0;var v,p=Object(b.a)(Object.keys(i));try{for(p.s();!(v=p.n()).done;){var x=v.value,g=E.getInstance().predictCourse(x,a,s.confidence,n),m=i[x]*e;f.sharePrices[x]=g,f.newPayout[x]=0,f.newInvestedMoney[x]=0;var S=U(x,a,s.confidence,n),j=f.totalShares[x]*S;if(d){f.distributingNewAmount[x]=j;var O,T=j,C=K(T,o),w=Object(y.a)(C,2);O=w[0],o=w[1];var A=O*L*z,P=K(A,r),D=Object(y.a)(P,2);A=D[0],r=D[1],f.totalTaxes+=A;var F=T-A;f.distributingAmountUsableForPayout[x]=F,f.newShares[x]=0}else{var k=j/g;f.newShares[x]=k,f.totalShares[x]+=k,f.dividendNewShares[x]=k,f.dividendTotalShares[x]+=k}var V=Math.min(m,f.distributingAmountUsableForPayout[x]);m-=V,f.distributingAmountUsableForPayout[x]-=V,f.newPayout[x]+=V;var M=0;if(l[x].investmentStepsIdx<t.length&&m>0){for(var _=H(m,s.costConfig)[1],Y=0,G=l[x].investmentStepsIdx,R=t[G].newShares[x]-l[x].alreadySoldShares;G<t.length;G++){var W=t[G],B=m-M,J=g*(G===l[x].investmentStepsIdx?W.newShares[x]-l[x].alreadySoldShares:W.newShares[x]),Z=Math.min(J,B),Q=Z/g;R=W.newShares[x]-Q,R-=G===l[x].investmentStepsIdx?l[x].alreadySoldShares:0;var X=Math.max(0,Z-(_-Y));Y+=Math.max(0,Z-X);var tt=Q*W.sharePrices[x],et=Math.max(0,X-tt),it=K(et,o),at=Object(y.a)(it,2);et=at[0],o=at[1];var nt=et*L*z,st=K(nt,r),rt=Object(y.a)(st,2);nt=rt[0],r=rt[1],c+=nt;var ot=X-nt;f.newPayout[x]+=ot,f.totalPayout[x]+=ot,f.totalShares[x]-=Q,M+=Z;var lt=0;lt=G===l[x].investmentStepsIdx?Math.max(0,W.dividendNewShares[x]-l[x].alreadySoldShares):W.dividendNewShares[x];var dt=Math.min(lt,Q);if(f.dividendTotalShares[x]-=dt,M>=m)break}h+=Y,l[x].investmentStepsIdx=G,l[x].alreadySoldShares=G<t.length?t[G].newShares[x]-R:0}var ht=$(t,a,o,i),ct=Object(y.a)(ht,2),ut=ct[0];o=ct[1],c+=ut,r+=ut}}catch(ft){p.e(ft)}finally{p.f()}return f.totalCosts+=h,f.totalTaxes+=c,q(f,n),t.push(f),[r,o]}function tt(t,e,i){var a,n={"SP5C.PAR":0,ESGE:0,SUSA:0},s={date:e,totalCosts:0,totalTaxes:0,newShares:Object(c.a)({},n),totalShares:Object(c.a)({},n),dividendNewShares:Object(c.a)({},n),dividendTotalShares:Object(c.a)({},n),distributingNewAmount:Object(c.a)({},n),distributingAmountUsableForPayout:Object(c.a)({},n),totalInvestedMoney:Object(c.a)({},n),totalPayout:Object(c.a)({},n),newPayout:Object(c.a)({},n),sharePrices:Object(c.a)({},n),newInvestedMoney:Object(c.a)({},n),newInvestment:0,inflation:0},r=Object(b.a)(Object.keys(t));try{for(r.s();!(a=r.n()).done;){var o=a.value;s.newShares[o]=0,s.totalShares[o]=0,s.dividendNewShares[o]=0,s.dividendTotalShares[o]=0,s.totalInvestedMoney[o]=0,s.totalPayout[o]=0,s.newPayout[o]=0,s.newInvestedMoney[o]=0,s.sharePrices[o]=E.getInstance().predictCourse(o,e,i.confidence,e)}}catch(l){r.e(l)}finally{r.f()}return s}var et=function(){function t(e,i,a,n,s,r,o,l,d,h,c){Object(u.a)(this,t),this.startCapital=void 0,this.monthlyInvestment=void 0,this.yearlyInvestmentIncrease=void 0,this.monthlyPayout=void 0,this.yearlyPayoutIncrease=void 0,this.savingPhaseLength=void 0,this.etfToRatio=void 0,this.configOptions=void 0,this.expectationOfLife=void 0,this.age=void 0,this.useDistributingModel=void 0,this.savingDates=[],this.payoutDates=[],this.initialDate=new Date,this.investmentSteps=[],this.startCapital=e,this.monthlyInvestment=i,this.monthlyPayout=n,this.savingPhaseLength=r,this.etfToRatio=o,this.configOptions=l,this.expectationOfLife=h,this.age=d,this.yearlyInvestmentIncrease=a,this.yearlyPayoutIncrease=s,this.useDistributingModel=c,this._calculateDatesForModel(),this._calculateModel()}return Object(f.a)(t,[{key:"_calculateDatesForModel",value:function(){for(var t=function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=e-t,s=new Date,r=new Date(s.getFullYear(),s.getMonth()+1),o=new Date(r);o.setFullYear(r.getFullYear()+i);var l=new Date(r);return l.setFullYear(r.getFullYear()+n+a),[r,o,l]}(this.age,this.expectationOfLife,this.savingPhaseLength),e=Object(y.a)(t,3),i=e[0],a=e[1],n=e[2],s=[],r=i;r<a;r=B(r))s.push(r);this.savingDates=s;for(var o=[],l=a;l<n;l=B(l))o.push(l);this.payoutDates=o,this.initialDate=i}},{key:"_calculateModel",value:function(){for(var t=[tt(this.etfToRatio,this.savingDates[0],this.configOptions)],e=Q(t,this.monthlyInvestment+this.startCapital,this.savingDates[0],this.initialDate,this.etfToRatio,this.configOptions,this.configOptions.taxFreeAmount,this.useDistributingModel),i=1;i<this.savingDates.length;i++){Q(t,Z(this.monthlyInvestment,this.yearlyInvestmentIncrease,i),this.savingDates[i],this.initialDate,this.etfToRatio,this.configOptions,e,this.useDistributingModel)}t=t.slice(1);for(var a=this.useDistributingModel?0:t[t.length-1].totalTaxes,n={"SP5C.PAR":{investmentStepsIdx:0,alreadySoldShares:0},ESGE:{investmentStepsIdx:0,alreadySoldShares:0},SUSA:{investmentStepsIdx:0,alreadySoldShares:0}},s=0;s<this.payoutDates.length;s++){var r=X(t,Z(this.monthlyPayout,this.yearlyPayoutIncrease,s),this.etfToRatio,this.payoutDates[s],this.initialDate,this.configOptions,a,e,n,this.useDistributingModel),o=Object(y.a)(r,2);a=o[0],e=o[1]}this.investmentSteps=t}},{key:"getInvestmentSteps",value:function(t){if(!Number.isInteger(O/t))throw new Error("The numberOfEntriesPerYear need to be dividable by ".concat(O," in order to make sense."));if(t===O)return this.investmentSteps;for(var e=[],i=O/t,a=0;a<this.investmentSteps.length;a+=i){for(var n=N()(this.investmentSteps[a]),s=1;s<i;s++){n.newInvestment+=this.investmentSteps[a+s].newInvestment;var r,o=Object(b.a)(Object.keys(this.investmentSteps[a+s].newPayout));try{for(o.s();!(r=o.n()).done;){var l=r.value;n.newPayout[l]+=this.investmentSteps[a+s].newPayout[l]}}catch(d){o.e(d)}finally{o.f()}}e.push(n)}return e}},{key:"getPayoutPhaseBeginDate",value:function(){return this.payoutDates[0]}}]),t}(),it=i(12),at=i(11),nt=1e6;function st(t){return t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace(/(?!^)([A-Z]|\d+)/g," $1"),"".concat(t,":")}var rt=function(){function t(e,i,a,n,s,r){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1100,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:300,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:250,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:40;if(Object(u.a)(this,t),this.tooltipDate=void 0,this.yExtent=void 0,this.textProperties={},this.lineStrokeWidth=3,this.contentOpacity=.65,this.valueTextOffset=200,this.standardFontSize=18,this.labelValueIdentifier="value",this.deltaIdentifier="delta",this.monospaceFont="monospace",this.standardFont=null,this.startTextAnchor="start",this.endTextAnchor="end",this.boldText="bold",this.normalText="normal",this.totalColor="#b59554",this.totalIdentifier="total",this.investmentSteps=void 0,this.dateExtent=[new Date,new Date],this.marginW=void 0,this.marginH=void 0,this.width=void 0,this.height=void 0,this.maxIndex=0,this.minIndex=0,this.xTextOffset=void 0,this.yScale=S.k(),this.xScale=S.l(),this.dataArray=[],this.payoutPhaseStartDate=void 0,this.svg=void 0,this.fadeOutGradientID="fadeOutGradient",this.fadeOutYearsLength=10,this.gridOpacity=.2,this.gridColor="grey",this.gridStrokeWidth=2,this.labelDivisionFactor=1,this.numberIndicator="K",this.hoverLine=void 0,this.interaction=void 0,this.textGroup=void 0,this.xAxis=void 0,this.yAxis=void 0,this.constructor===t)throw new Error("Abstract classes can't be instantiated.");t.activeStrategies.push(this),this.investmentSteps=e,this.payoutPhaseStartDate=a,this.tooltipDate=null!=s?s:new Date(0),this.yExtent=null!=r?r:[0,0],this.marginW=h,this.marginH=c,this.width=l,this.height=d,this.xTextOffset=1.02*this.width,i.innerHTML="",this.svg=S.m(i).append("svg").attr("class","img-fluid").attr("id",n).attr("viewBox","0 0 ".concat(this.width+2*this.marginW," ").concat(this.height+2*this.marginH+o)).append("g").attr("transform","translate(".concat([this.marginW/2,this.marginH],")")),this.textGroup=this.svg,this.interaction=this.svg,this.hoverLine=this.svg.append("line"),this.yAxis=S.c(this.yScale),this.xAxis=S.b(this.xScale)}return Object(f.a)(t,[{key:"render",value:function(){this._prepareData(),this._calculateExtents(),this._createScales(),this._createAxis(),this._drawGrid(),this._drawContent(),this._drawFadeOut(),this._prepareText(),this._drawText(),this._drawAxis(),this._addInteraction(),this.tooltipDate>=this.dateExtent[0]&&this.tooltipDate<=this.dateExtent[1]&&this._updateAllDiagrams()}},{key:"valueToDisplayNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&null!=t&&(t=Math.abs(t)),t/this.labelDivisionFactor}},{key:"valueToDisplayText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=i?0:2;return"".concat(null!=t?this.valueToDisplayNumber(t,e).toLocaleString(void 0,{maximumFractionDigits:a,minimumFractionDigits:a}):" - ").concat(this.numberIndicator," \u20ac")}},{key:"addTextProperty",value:function(t,e){this.textProperties[t]={text:e.text,x:e.x,y:e.y,fontSize:e.fontSize?e.fontSize:this.standardFontSize,fontFamily:e.fontFamily?e.fontFamily:this.standardFont,textAnchor:e.textAnchor?e.textAnchor:this.startTextAnchor,fontWeight:e.fontWeight?e.fontWeight:this.boldText,color:e.color}}},{key:"_calculateExtents",value:function(){var t=this;this.dateExtent=S.f(this.dataArray[0],(function(t){return t.date}));var e=new Date(this.payoutPhaseStartDate);if(e.setMonth(e.getMonth()+O),0===this.yExtent[0]&&0===this.yExtent[1]){var i=this.dataArray[this.maxIndex].filter((function(i){return i.date<=e&&i.date>t.dateExtent[0]})),a=this.dataArray[this.minIndex].filter((function(t){return t.date<=e})),n=S.h(i.map((function(t){return t.yStart}))),s=S.i(a.map((function(t){return t.yEnd})));this.yExtent=[s,n]}this.labelDivisionFactor=Math.max(-this.yExtent[0],this.yExtent[1])>=5e6?nt:1e3,this.numberIndicator=this.labelDivisionFactor===nt?"M":"K"}},{key:"_createScales",value:function(){this.yScale=S.k().domain(this.yExtent).range([this.height,0]),this.xScale=S.l().domain(this.dateExtent).range([0,this.width])}},{key:"_createAxis",value:function(){var t=this,e=this.yScale.ticks(6).every((function(e){return Number.isInteger(t.valueToDisplayNumber(e,!1))}));this.yAxis=S.c(this.yScale).tickFormat((function(i){return t.valueToDisplayText(i,!1,e)})).ticks(6),this.xAxis=S.b(this.xScale)}},{key:"_drawGrid",value:function(){var t=this,e=this.svg.append("g").attr("class","grid"),i=e.append("g").attr("class","yGrid"),a=e.append("g").attr("class","xGrid");i.selectAll("line").data(this.yScale.ticks(6)).enter().append("line").attr("x1",this.xScale(this.dateExtent[0])).attr("y1",(function(e){return t.yScale(e)})).attr("x2",this.xScale(this.dateExtent[1])).attr("y2",(function(e){return t.yScale(e)})).style("stroke-width",this.gridStrokeWidth).style("stroke",this.gridColor).style("opacity",this.gridOpacity),a.selectAll("line").data(this.xScale.ticks()).enter().append("line").attr("x1",(function(e){return t.xScale(e)})).attr("y1",this.yScale(this.yExtent[0])).attr("x2",(function(e){return t.xScale(e)})).attr("y2",this.yScale(this.yExtent[1])).style("stroke-width",this.gridStrokeWidth).style("stroke",this.gridColor).style("opacity",this.gridOpacity)}},{key:"_drawAxis",value:function(){this.svg.append("g").style("font-size","20px").call(this.yAxis),this.svg.append("g").style("font-size","20px").attr("transform","translate(0, ".concat(this.height,")")).call(this.xAxis),this.svg.append("g").append("line").attr("x1",this.xScale(this.dateExtent[0])).attr("y1",this.yScale(0)).attr("x2",this.xScale(this.dateExtent[1])).attr("y2",this.yScale(0)).style("stroke-width",this.lineStrokeWidth).style("stroke","black"),this.svg.append("g").append("line").attr("x1",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y1",this.yScale(this.yExtent[0])).attr("x2",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y2",this.yScale(this.yExtent[1])).style("stroke-width",this.lineStrokeWidth).style("stroke","black")}},{key:"_addInteraction",value:function(){var e=this;this.interaction=this.svg.append("g").attr("class","interaction").style("visibility","hidden").attr("transform","translate(".concat([0,-this.marginH],")")),this.hoverLine=this.interaction.append("line").attr("class","tooltipLine").style("stroke","blue").style("stroke-dasharray","3,3").style("stroke-width",this.lineStrokeWidth).style("opacity",.5).attr("y1",this.height+2*this.marginH).attr("y2",0),this.svg.append("rect").attr("class","mouseEvent").attr("transform","translate(".concat([0,-this.marginH],")")).attr("height",this.height+2*this.marginH).attr("width",this.width).attr("fill","none").style("pointer-events","all").on("mouseover",(function(){return t._setInteractionVisibilityForActiveDiagrams("visible")})).on("mousemove",(function(t){return e._handleTooltipEvent(t)}))}},{key:"_handleTooltipEvent",value:function(t){var e=S.j(t)[0],i=this.xScale.invert(e);this.tooltipDate=M(i),this._updateAllDiagrams()}},{key:"_updateAllDiagrams",value:function(){var e=function(t,e){var i=e[0].date,a=e[1].date,n=(t.getFullYear()-i.getFullYear())*O+(t.getMonth()-i.getMonth()),s=(a.getFullYear()-i.getFullYear())*O+(a.getMonth()-i.getMonth());return Math.floor(n/s)}(this.tooltipDate,this.investmentSteps);t._setInteractionVisibilityForActiveDiagrams("visible");var i,a=Object(b.a)(t.activeStrategies);try{for(a.s();!(i=a.n()).done;){var n=i.value;n.hoverLine.attr("x1",this.xScale(this.tooltipDate)).attr("x2",this.xScale(this.tooltipDate)),n._updateTooltip(e),n._updateDiagram()}}catch(s){a.e(s)}finally{a.f()}}},{key:"_drawText",value:function(){this.textGroup=this.svg.append("g").attr("class","textGroup"),this.textGroup.selectAll("text").data(Object.values(this.textProperties)).enter().append("text").text((function(t){return t.text})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).style("font-size",(function(t){return t.fontSize})).style("font-family",(function(t){return t.fontFamily})).style("font-weight",(function(t){return t.fontWeight})).style("text-anchor",(function(t){return t.textAnchor})).style("fill",(function(t){return t.color}))}},{key:"_updateDiagram",value:function(){this.textGroup.selectAll("text").text((function(t){return t.text}))}},{key:"_prepareText",value:function(){var t=this.xScale(this.dateExtent[0])+(this.xScale(this.payoutPhaseStartDate)-this.xScale(this.dateExtent[0]))/2,e=this.xScale(this.payoutPhaseStartDate)+(this.xScale(this.dateExtent[1])-this.xScale(this.payoutPhaseStartDate))/2,i=-10;this.addTextProperty("savingBold",{x:t,y:i,text:"SAVING",textAnchor:this.endTextAnchor,color:"black",fontSize:1.5*this.standardFontSize}),this.addTextProperty("savingPhase",{x:t,y:i,text:"Phase",textAnchor:this.startTextAnchor,fontWeight:this.normalText,color:"black",fontSize:1.5*this.standardFontSize}),this.addTextProperty("payoutBold",{x:e,y:i,text:"PAYOUT",textAnchor:this.endTextAnchor,color:"black",fontSize:1.5*this.standardFontSize}),this.addTextProperty("payoutPhase",{x:e,y:i,text:"Phase",textAnchor:this.startTextAnchor,fontWeight:this.normalText,color:"black",fontSize:1.5*this.standardFontSize})}},{key:"_drawFadeOut",value:function(){var t=this.svg.append("g").attr("class","fadeOut"),e=new Date(this.dateExtent[1]);e.setFullYear(e.getFullYear()-this.fadeOutYearsLength);var i=t.append("linearGradient").attr("id",this.fadeOutGradientID);i.append("stop").attr("class","gradientStart").attr("offset","0%").attr("stop-color","white").attr("stop-opacity",0),i.append("stop").attr("class","gradientEnd").attr("offset","100%").attr("stop-color","white").attr("stop-opacity",1),t.append("rect").attr("x",this.xScale(e)).attr("y",-this.marginH).attr("width",this.xScale(this.dateExtent[1])-this.xScale(e)+1).attr("height",this.yScale(this.yExtent[0])-this.yScale(this.yExtent[1])+2*this.marginH).style("fill","url(#".concat(this.fadeOutGradientID,")"))}}],[{key:"reset",value:function(){t.activeStrategies=[]}},{key:"_setInteractionVisibilityForActiveDiagrams",value:function(e){var i,a=Object(b.a)(t.activeStrategies);try{for(a.s();!(i=a.n()).done;){i.value.interaction.style("visibility",e)}}catch(n){a.e(n)}finally{a.f()}}}]),t}();rt.activeStrategies=[];var ot="payout",lt="invested",dt={payout:{first:"#3acc5c",second:"#2d9e45"},invested:{first:"#ff3e58",second:"#c32f46"}},ht=function(t){Object(p.a)(i,t);var e=Object(x.a)(i);function i(t,a,n,s,r){var o;return Object(u.a)(this,i),(o=e.call(this,t,a,n,"secondSVG",s,r)).barPaddingPercentage=.9,o.rectWidth=0,o}return Object(f.a)(i,[{key:"_prepareData",value:function(){var t=0,e=1;this.minIndex=t,this.maxIndex=e,this.dataArray=[[],[]];var i,a=this.investmentSteps[0].date.getFullYear(),n=Object(b.a)(this.investmentSteps);try{for(n.s();!(i=n.n()).done;){var s=i.value,r=W(s),o=(s.date.getFullYear()-a)%2===0?"first":"second";this.dataArray[t].push({yStart:0,yEnd:-s.newInvestment,date:s.date,color:dt.invested[o]}),this.dataArray[e].push({yStart:r,yEnd:0,date:s.date,color:dt.payout[o]})}}catch(l){n.e(l)}finally{n.f()}this.rectWidth=this.width/this.dataArray[t].length*this.barPaddingPercentage}},{key:"_prepareText",value:function(){Object(it.a)(Object(at.a)(i.prototype),"_prepareText",this).call(this),this.textProperties.payout={text:st(ot),x:this.xTextOffset,y:.25*this.height-.5*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.standardFont,textAnchor:this.startTextAnchor,fontWeight:this.boldText,color:dt.payout.second},this.textProperties[ot+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:.25*this.height-.5*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor,fontWeight:this.boldText,color:dt.payout.second},this.textProperties.invested={text:st(lt),x:this.xTextOffset,y:.75*this.height-.5*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.standardFont,textAnchor:this.startTextAnchor,fontWeight:this.boldText,color:dt.invested.second},this.textProperties[lt+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:.75*this.height-.5*this.standardFontSize,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor,fontWeight:this.boldText,color:dt.invested.second}}},{key:"_updateTooltip",value:function(t){var e=W(this.investmentSteps[t]),i=this.investmentSteps[t].newInvestment;this.textProperties[ot+this.labelValueIdentifier].text=this.valueToDisplayText(e),this.textProperties[lt+this.labelValueIdentifier].text=this.valueToDisplayText(i)}},{key:"_drawContent",value:function(){var t,e=this,i=this.dataArray[0][this.dataArray[0].length-1].date===this.dateExtent[1],a=Object(b.a)(this.dataArray);try{for(a.s();!(t=a.n()).done;){var n=t.value;i&&(n=n.slice(0,-1)),this.svg.append("g").attr("class","bars").selectAll("rect.none").data(n).enter().append("rect").style("fill",(function(t){return t.color})).attr("x",(function(t){return e.xScale(t.date)})).attr("width",this.rectWidth).attr("y",(function(t){return e.yScale(t.yStart)})).attr("height",(function(t){return e.yScale(t.yEnd)-e.yScale(t.yStart)})).style("opacity",this.contentOpacity)}}catch(s){a.e(s)}finally{a.f()}}}]),i}(rt),ct=function(t){Object(p.a)(i,t);var e=Object(x.a)(i);function i(t,a,n,s,r,o,l,d){var h;Object(u.a)(this,i),(h=e.call(this,t,a,n,"firstSVG",s,r,180)).etfLineColors={"SP5C.PAR":{total:"#1f78b4",invested:"#a6cee3"},ESGE:{total:"#33a02c",invested:"#b2df8a"},SUSA:{total:"#ff7f00",invested:"#fdbf6f"}},h.negativeColors={inflation:"#f7528e",totalCosts:"#6a3d9a",totalTaxes:"#e31a1c"},h.negativeLabels=["totalCosts","totalTaxes","inflation"],h.investedIdentifier="invested",h.capitalIdentifier="capital",h.etfIdentifiers=void 0,h.dataToIndex={},h.subtractInflationFromTotal=void 0,h.previousInvestmentSteps=void 0,h.previousInvestmentSteps=d,h.subtractInflationFromTotal=l,h.etfIdentifiers=[];var c,f=Object(b.a)(Object.keys(o));try{for(f.s();!(c=f.n()).done;){var v=c.value,p=o[v];null!=p&&p>0&&h.etfIdentifiers.push(v)}}catch(x){f.e(x)}finally{f.f()}return h}return Object(f.a)(i,[{key:"_prepareData",value:function(){this.dataToIndex={totalCosts:0,totalTaxes:1,inflation:2};var t,e=3,i=Object(b.a)(this.etfIdentifiers);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.dataToIndex[a+this.investedIdentifier]=e++,this.dataToIndex[a+this.capitalIdentifier]=e++}}catch(v){i.e(v)}finally{i.f()}this.minIndex=this.dataToIndex.inflation,this.maxIndex=e-1,this.dataArray=[];for(var n=0;n<e;n++)this.dataArray.push([]);var s,r=Object(b.a)(this.investmentSteps);try{for(r.s();!(s=r.n()).done;){var o=s.value;this.dataArray[this.dataToIndex.totalCosts].push({yStart:0,yEnd:-o.totalCosts,date:o.date,color:this.negativeColors.totalCosts}),this.dataArray[this.dataToIndex.totalTaxes].push({yStart:-o.totalCosts,yEnd:-o.totalCosts-o.totalTaxes,date:o.date,color:this.negativeColors.totalTaxes}),this.dataArray[this.dataToIndex.inflation].push({yStart:-o.totalCosts-o.totalTaxes,yEnd:-o.totalCosts-o.totalTaxes-o.inflation,date:o.date,color:this.negativeColors.inflation});var l,d=0,h=Object(b.a)(this.etfIdentifiers);try{for(h.s();!(l=h.n()).done;){var c=l.value,u=Y(c,o),f=G(c,o);this.dataArray[this.dataToIndex[c+this.capitalIdentifier]].push({yStart:u+d,yEnd:u-f+d,date:o.date,color:this.etfLineColors[c].total}),this.dataArray[this.dataToIndex[c+this.investedIdentifier]].push({yStart:u-f+d,yEnd:d,date:o.date,color:this.etfLineColors[c].invested}),d+=u}}catch(v){h.e(v)}finally{h.f()}}}catch(v){r.e(v)}finally{r.f()}}},{key:"_drawLines",value:function(){var t=this;this.svg.append("path").datum(this.dataArray[this.dataArray.length-1]).style("stroke",this.totalColor).style("stroke-width",this.lineStrokeWidth).style("fill","none").attr("d",S.g().x((function(e){return t.xScale(e.date)})).y((function(e,i){return t.yScale(e.yStart-(t.subtractInflationFromTotal?t.investmentSteps[i].inflation:0))})))}},{key:"_drawContent",value:function(){this._drawArea(),this._drawLines()}},{key:"_drawArea",value:function(){for(var t=this,e=0;e<this.dataArray.length;e++)this.svg.append("g").attr("class","area").append("path").datum(this.dataArray[e]).style("opacity",this.contentOpacity).style("fill",(function(t){return t[0].color})).attr("d",S.a().curve(S.e).x((function(e){return t.xScale(e.date)})).y0((function(e){return t.yScale(e.yEnd)})).y1((function(e){return t.yScale(e.yStart)})))}},{key:"_prepareText",value:function(){Object(it.a)(Object(at.a)(i.prototype),"_prepareText",this).call(this);var t=.4*this.standardFontSize;this.addNegativeLabels(t),this.addETFLabels(t),this.addTotalLabel();var e=1.1*this.height,a=this.width/this.negativeLabels.length;this.addDeltaLabels(e,t,a)}},{key:"addDeltaLabels",value:function(t,e,i){this.addDeltaHeadingText(t),this.addNegativeDeltaLabels(t,e,i);this.addETFDeltaLabels(t,e,3);var a=t+2*this.standardFontSize+e;this.addTotalDeltaLabel(3,a),this.addPayoutAndInvestedDeltaLabels(3,a)}},{key:"addTotalDeltaLabel",value:function(t,e){this.addTextProperty(this.totalIdentifier+this.deltaIdentifier,{text:st(this.totalIdentifier),x:this.width/t*0,y:e,color:this.totalColor}),this.addTextProperty(this.totalIdentifier+this.deltaIdentifier+this.labelValueIdentifier,{text:this.valueToDisplayText(void 0),x:this.width/t*0+this.valueTextOffset,y:e,color:this.totalColor,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}},{key:"addETFDeltaLabels",value:function(t,e,i){for(var a=0;a<this.etfIdentifiers.length;a++){var n=t+(this.standardFontSize+e)*(a+3);this.addTextProperty(this.etfIdentifiers[a]+this.deltaIdentifier,{text:$t[this.etfIdentifiers[a]],x:this.width/i*0,y:n,color:this.etfLineColors[this.etfIdentifiers[a]].total}),this.addTextProperty(this.etfIdentifiers[a]+this.deltaIdentifier+this.totalIdentifier,{text:st(this.totalIdentifier),x:this.width/i*1,y:n,color:this.etfLineColors[this.etfIdentifiers[a]].total}),this.addTextProperty(this.etfIdentifiers[a]+this.deltaIdentifier+this.labelValueIdentifier+this.totalIdentifier,{text:this.valueToDisplayText(void 0),x:this.width/i*1+this.valueTextOffset,y:n,color:this.etfLineColors[this.etfIdentifiers[a]].total,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor}),this.addTextProperty(this.etfIdentifiers[a]+this.deltaIdentifier+this.investedIdentifier,{text:st(this.investedIdentifier),x:this.width/i*2,y:n,color:this.etfLineColors[this.etfIdentifiers[a]].invested}),this.addTextProperty(this.etfIdentifiers[a]+this.deltaIdentifier+this.labelValueIdentifier+this.investedIdentifier,{text:this.valueToDisplayText(void 0),x:this.width/i*2+this.valueTextOffset,y:n,color:this.etfLineColors[this.etfIdentifiers[a]].invested,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}}},{key:"addPayoutAndInvestedDeltaLabels",value:function(t,e){this.textProperties[ot+this.deltaIdentifier]={text:st(ot),x:this.width/t*1,y:e,fontSize:this.standardFontSize,fontFamily:this.standardFont,textAnchor:this.startTextAnchor,fontWeight:this.boldText,color:dt.payout.second},this.textProperties[ot+this.deltaIdentifier+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.width/t*1+this.valueTextOffset,y:e,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor,fontWeight:this.boldText,color:dt.payout.second},this.textProperties[lt+this.deltaIdentifier]={text:st(lt),x:this.width/t*2,y:e,fontSize:this.standardFontSize,fontFamily:this.standardFont,textAnchor:this.startTextAnchor,fontWeight:this.boldText,color:dt.invested.second},this.textProperties[lt+this.deltaIdentifier+this.labelValueIdentifier]={text:this.valueToDisplayText(void 0),x:this.width/t*2+this.valueTextOffset,y:e,fontSize:this.standardFontSize,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor,fontWeight:this.boldText,color:dt.invested.second}}},{key:"addNegativeDeltaLabels",value:function(t,e,i){for(var a=0;a<this.negativeLabels.length;a++){var n=t+(this.standardFontSize+e)*(4+this.etfIdentifiers.length),s=this.negativeColors[this.negativeLabels[a]];this.addTextProperty(this.negativeLabels[a]+this.deltaIdentifier,{text:st(this.negativeLabels[a]),x:i*a,y:n,color:s}),this.addTextProperty(this.negativeLabels[a]+this.deltaIdentifier+this.labelValueIdentifier,{text:this.valueToDisplayText(void 0),x:i*a+this.valueTextOffset,y:n,color:s,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}}},{key:"addDeltaHeadingText",value:function(t){this.addTextProperty(this.deltaIdentifier,{text:"Differences to Previous Configuration:",x:this.xScale(this.dateExtent[0].valueOf()+(this.dateExtent[1].valueOf()-this.dateExtent[0].valueOf())/2),y:t+this.standardFontSize,color:"black",textAnchor:"middle"})}},{key:"addTotalLabel",value:function(){this.addTextProperty(this.totalIdentifier,{text:st(this.totalIdentifier),x:this.xTextOffset,y:this.yScale(this.yExtent[1]),color:this.totalColor}),this.addTextProperty(this.totalIdentifier+this.labelValueIdentifier,{text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:this.yScale(this.yExtent[1]),color:this.totalColor,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}},{key:"addETFLabels",value:function(t){for(var e=0;e<this.etfIdentifiers.length;e++)this.addTextProperty(this.etfIdentifiers[e],{text:$t[this.etfIdentifiers[e]],x:this.xTextOffset,y:this.yScale(0)-(this.standardFontSize+t)*e*3-2*this.standardFontSize,color:this.etfLineColors[this.etfIdentifiers[e]].total}),this.addTextProperty(this.etfIdentifiers[e]+this.totalIdentifier,{text:st(this.totalIdentifier),x:this.xTextOffset,y:this.yScale(0)-(this.standardFontSize+t)*e*3-1*this.standardFontSize,color:this.etfLineColors[this.etfIdentifiers[e]].total}),this.addTextProperty(this.etfIdentifiers[e]+this.labelValueIdentifier+this.totalIdentifier,{text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:this.yScale(0)-(this.standardFontSize+t)*e*3-1*this.standardFontSize,color:this.etfLineColors[this.etfIdentifiers[e]].total,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor}),this.addTextProperty(this.etfIdentifiers[e]+this.investedIdentifier,{text:st(this.investedIdentifier),x:this.xTextOffset,y:this.yScale(0)-(this.standardFontSize+t)*e*3-0*this.standardFontSize,color:this.etfLineColors[this.etfIdentifiers[e]].invested}),this.addTextProperty(this.etfIdentifiers[e]+this.labelValueIdentifier+this.investedIdentifier,{text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:this.yScale(0)-(this.standardFontSize+t)*e*3-0*this.standardFontSize,color:this.etfLineColors[this.etfIdentifiers[e]].invested,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}},{key:"addNegativeLabels",value:function(t){for(var e=0;e<this.negativeLabels.length;e++){var i=this.yScale(0)+(this.standardFontSize+t)*(e+1),a=this.negativeColors[this.negativeLabels[e]];this.addTextProperty(this.negativeLabels[e],{text:st(this.negativeLabels[e]),x:this.xTextOffset,y:i,color:a}),this.addTextProperty(this.negativeLabels[e]+this.labelValueIdentifier,{text:this.valueToDisplayText(void 0),x:this.xTextOffset+this.valueTextOffset,y:i,color:a,fontFamily:this.monospaceFont,textAnchor:this.endTextAnchor})}}},{key:"_updateTooltip",value:function(t){var e,i=Object(b.a)(this.etfIdentifiers);try{for(i.s();!(e=i.n()).done;){var a=e.value,n=Y(a,this.investmentSteps[t]),s=n-G(a,this.investmentSteps[t]);this.textProperties[a+this.labelValueIdentifier+this.investedIdentifier].text=this.valueToDisplayText(s,!0),this.textProperties[a+this.labelValueIdentifier+this.totalIdentifier].text=this.valueToDisplayText(n,!0)}}catch(M){i.e(M)}finally{i.f()}var r,o=Object(b.a)(this.negativeLabels);try{for(o.s();!(r=o.n()).done;){var l=r.value,d=this.investmentSteps[t][l];this.textProperties[l+this.labelValueIdentifier].text=this.valueToDisplayText(d,!0)}}catch(M){o.e(M)}finally{o.f()}var h,c=0,u=Object(b.a)(this.etfIdentifiers);try{for(u.s();!(h=u.n()).done;){c+=Y(h.value,this.investmentSteps[t])}}catch(M){u.e(M)}finally{u.f()}if(c-=this.subtractInflationFromTotal?this.investmentSteps[t].inflation:0,this.textProperties[this.totalIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(c),null!=this.previousInvestmentSteps&&this.previousInvestmentSteps.length>t){var f,v=Object(b.a)(this.negativeLabels);try{for(v.s();!(f=v.n()).done;){var p=f.value,x=this.investmentSteps[t][p]-this.previousInvestmentSteps[t][p];this.textProperties[p+this.deltaIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(x,!0)}}catch(M){v.e(M)}finally{v.f()}var y,g=Object(b.a)(this.etfIdentifiers);try{for(g.s();!(y=g.n()).done;){var m=y.value,S=Y(m,this.investmentSteps[t]),j=S-G(m,this.investmentSteps[t]),O=Y(m,this.previousInvestmentSteps[t]),T=j-(O-G(m,this.previousInvestmentSteps[t])),C=S-O;this.textProperties[m+this.deltaIdentifier+this.labelValueIdentifier+this.investedIdentifier].text=this.valueToDisplayText(T),this.textProperties[m+this.deltaIdentifier+this.labelValueIdentifier+this.totalIdentifier].text=this.valueToDisplayText(C)}}catch(M){g.e(M)}finally{g.f()}var I,w=0,A=Object(b.a)(this.etfIdentifiers);try{for(A.s();!(I=A.n()).done;){w+=Y(I.value,this.previousInvestmentSteps[t])}}catch(M){A.e(M)}finally{A.f()}w-=this.subtractInflationFromTotal?this.previousInvestmentSteps[t].inflation:0,this.textProperties[this.totalIdentifier+this.deltaIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(c-w);var P=W(this.previousInvestmentSteps[t]),D=W(this.investmentSteps[t]);this.textProperties[ot+this.deltaIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(D-P);var F=this.previousInvestmentSteps[t].newInvestment,k=this.investmentSteps[t].newInvestment;this.textProperties[lt+this.deltaIdentifier+this.labelValueIdentifier].text=this.valueToDisplayText(k-F)}else if(null!=this.previousInvestmentSteps&&this.previousInvestmentSteps.length<=t)for(var V in this.textProperties)V.includes(this.deltaIdentifier)&&V.includes(this.labelValueIdentifier)&&(this.textProperties[V].text=this.valueToDisplayText(void 0))}}]),i}(rt),ut=function(t){Object(p.a)(i,t);var e=Object(x.a)(i);function i(t,a,n,s,r,o,l,d,h,c){var f;return Object(u.a)(this,i),(f=e.call(this,t,s,r,o,l,d,h,c)).confidenceColors={minimumLine:"#ff3e58",maximumLine:"#00e396",middleLine:f.totalColor,area:"#a6d8fe"},f.minInvestmentSteps=void 0,f.maxInvestmentSteps=void 0,f.minInvestmentSteps=a,f.maxInvestmentSteps=n,f.subtractInflationFromTotal=h,f}return Object(f.a)(i,[{key:"_prepareData",value:function(){this.dataToIndex={areaConfidence:0,middleConfidence:1},this.minIndex=this.dataToIndex.areaConfidence,this.maxIndex=this.dataToIndex.areaConfidence,this.dataArray=[];for(var t=0;t<Object.keys(this.dataToIndex).length;t++)this.dataArray.push([]);for(var e=0;e<this.investmentSteps.length;e++){this.dataArray[this.dataToIndex.areaConfidence].push({yStart:J(this.minInvestmentSteps[e])-(this.subtractInflationFromTotal?this.minInvestmentSteps[e].inflation:0),yEnd:J(this.maxInvestmentSteps[e])-(this.subtractInflationFromTotal?this.maxInvestmentSteps[e].inflation:0),date:this.investmentSteps[e].date,color:this.confidenceColors.area}),console.log(this.dataArray[this.dataToIndex.areaConfidence][this.dataArray[this.dataToIndex.areaConfidence].length-1]);var i=J(this.investmentSteps[e])-(this.subtractInflationFromTotal?this.investmentSteps[e].inflation:0);this.dataArray[this.dataToIndex.middleConfidence].push({yStart:i,yEnd:i,date:this.investmentSteps[e].date,color:this.confidenceColors.middleLine})}}},{key:"_drawLines",value:function(){for(var t=this,e=[this.dataArray[this.dataToIndex.areaConfidence],this.dataArray[this.dataToIndex.areaConfidence],this.dataArray[this.dataToIndex.middleConfidence]],i=["yStart","yEnd","yStart"],a=[this.confidenceColors.minimumLine,this.confidenceColors.maximumLine,this.confidenceColors.middleLine],n=function(n){t.svg.append("path").datum(e[n]).style("stroke",a[n]).style("stroke-width",t.lineStrokeWidth).style("fill","none").attr("d",S.g().x((function(e){return t.xScale(e.date)})).y((function(a,s){return t.yScale(e[n][s][i[n]])})))},s=0;s<e.length;s++)n(s)}},{key:"_drawContent",value:function(){this._drawArea(),this._drawLines()}},{key:"_drawArea",value:function(){var t=this;this.svg.append("g").attr("class","area").append("path").datum(this.dataArray[this.dataToIndex.areaConfidence]).style("opacity",this.contentOpacity).style("fill",(function(t){return t[0].color})).attr("d",S.a().curve(S.e).x((function(e){return t.xScale(e.date)})).y0((function(e){return t.yScale(e.yEnd)})).y1((function(e){return t.yScale(e.yStart)})))}}]),i}(ct),ft=i(0),vt=function(t){Object(p.a)(i,t);var e=Object(x.a)(i);function i(){var t;Object(u.a)(this,i);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).firstSVGRef=n.a.createRef(),t.secondSVGRef=n.a.createRef(),t.trendChart=void 0,t.cashflowChart=void 0,t.investmentModel=void 0,t}return Object(f.a)(i,[{key:"_getETFIdentifierToRatio",value:function(){var t={},e=this.props.etfDropdownSelection.elements;for(var i in e)e[i].selected&&(t[e[i].symbol]=T(e[i].value));return t}},{key:"_getInvestmentModel",value:function(t,e){var i={taxFreeAmount:this.props[Et].value,costConfig:Qt(this.props,!0),confidence:T(this.props[e].value)};return new et(this.props[At].value,this.props[Pt].value,T(this.props[Dt].value),this.props[_t].value,T(this.props[Nt].value),this.props[Vt].value,t,i,this.props[Mt].value,this.props[Lt].value,this.props[Kt].value)}},{key:"_getTooltipDate",value:function(){return null!=this.trendChart?this.trendChart.tooltipDate:null!=this.cashflowChart?this.cashflowChart.tooltipDate:void 0}},{key:"_getYAxisExtent",value:function(t){return null!=t&&this.props[Rt].value?t.yExtent:void 0}},{key:"_drawVisualization",value:function(){rt.reset();try{if(this.props.isValid&&null!=this.firstSVGRef.current&&null!=this.secondSVGRef.current){var t=this._getETFIdentifierToRatio(),e=null!=this.investmentModel?this.investmentModel.getInvestmentSteps(this.props[zt].value):void 0;this.investmentModel=this._getInvestmentModel(t,Ht);var i=this.investmentModel.getPayoutPhaseBeginDate(),a=this.investmentModel.getInvestmentSteps(this.props[zt].value),n=this._getTooltipDate();this.props[Jt].value?(this.trendChart=new ut(a,this._getInvestmentModel(t,Bt).getInvestmentSteps(this.props[zt].value),this._getInvestmentModel(t,Ut).getInvestmentSteps(this.props[zt].value),this.firstSVGRef.current,i,n,this._getYAxisExtent(this.trendChart),t,this.props[Wt].value,e),this.trendChart.render()):(this.trendChart=new ct(a,this.firstSVGRef.current,i,n,this._getYAxisExtent(this.trendChart),t,this.props[Wt].value,e),this.trendChart.render()),this.cashflowChart=new ht(a,this.secondSVGRef.current,i,n,this._getYAxisExtent(this.cashflowChart)),this.cashflowChart.render()}}catch(s){console.error(s)}}},{key:"componentDidMount",value:function(){this._drawVisualization()}},{key:"componentDidUpdate",value:function(){this._drawVisualization()}},{key:"render",value:function(){return Object(ft.jsxs)(n.a.Fragment,{children:[Object(ft.jsx)("div",{ref:this.secondSVGRef}),Object(ft.jsx)("div",{ref:this.firstSVGRef})]})}}]),i}(n.a.Component);function pt(t){return Object(ft.jsx)("div",{id:t.identifier+"Feedback",className:"invalid-tooltip",style:{visibility:t.isValid?"hidden":"visible"},children:t.errorMessage})}function xt(t){return t.noLabel?null:t.textAppending.length>0?Object(ft.jsxs)("label",{className:"form-label",htmlFor:t.identifier,children:[t.label," in ",Object(ft.jsx)("span",{className:"inputUnit",children:t.textAppending})]}):Object(ft.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label})}function yt(t){return Object(ft.jsxs)("div",{className:"position-relative",children:[Object(ft.jsx)(xt,Object(c.a)({},t)),Object(ft.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"number",value:t.value,onChange:function(e){return t.onValueChange(e.target.value,t.identifier,!0)},disabled:t.disabled}),Object(ft.jsx)(pt,Object(c.a)({},t))]})}function bt(t){return Object(ft.jsxs)("div",{className:"position-relative",children:[Object(ft.jsx)(xt,Object(c.a)({},t)),Object(ft.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(e.target.value.split(" ")[0],t.identifier)},disabled:t.disabled}),Object(ft.jsx)(pt,Object(c.a)({},t))]})}function gt(t){return Object(ft.jsxs)("div",{className:"position-relative",children:[Object(ft.jsx)(xt,Object(c.a)({},t)),Object(ft.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"number",value:t.value,onChange:function(e){return t.onValueChange(e.target.value.split(" ")[0],t.identifier)},disabled:t.disabled}),Object(ft.jsx)(pt,Object(c.a)({},t))]})}function mt(t){return Object(ft.jsxs)("div",{className:"checkbox-element",children:[Object(ft.jsx)("input",{className:"form-check-input",id:t.identifier,type:"checkbox",value:t.value.toString(),onChange:function(){return t.onValueChange(t.identifier)}}),Object(ft.jsx)("label",{className:"form-check-label",htmlFor:t.identifier,children:t.label})]})}function St(t){return Object(ft.jsx)("div",{className:"row",children:Object(ft.jsx)("div",{className:"col-12 p-0",children:Object(ft.jsx)("div",{className:"d-grid gap-0",children:Object(ft.jsxs)("div",{className:"overlay min-vh-100 text-center m-0 d-flex flex-column justify-content-center",style:{visibility:t.displayOverlay?"visible":"hidden"},children:[Object(ft.jsxs)("h1",{className:"p-5",children:["Enter your personal"," ",Object(ft.jsxs)("a",{href:"https://www.alphavantage.co/support/#api-key",target:"_blank",rel:"noopener noreferrer",children:[" ","Alphavantage API Key"]})," "]}),Object(ft.jsx)(bt,Object(c.a)(Object(c.a)({},t),{},{disabled:!t.displayOverlay})),Object(ft.jsx)("button",{type:"button",className:"btn btn-primary my-5",onClick:t.handleAPIKeyConfirm,children:"Confirm"})]})})})})}function jt(t){var e=t.title.replace(/\W/g,"_");return Object(ft.jsxs)("div",{className:"position-relative my-4 mb-1",children:[Object(ft.jsxs)("div",{className:"d-flex my-3",children:[Object(ft.jsx)("button",{className:"btn btn-secondary hamburgerButton mt-0 mb-0 pt-0 pb-0 me-4",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e),"aria-expanded":t.initiallyCollapsed?"false":"true","aria-controls":e,children:"\u2630"}),Object(ft.jsx)("h6",{className:"sidebar-heading m-0 my-auto",children:t.title})]}),Object(ft.jsx)("div",{className:"collapse "+(t.initiallyCollapsed?"":"show"),id:e,children:t.children})]})}function Ot(t,e){return e.fixedCosts===t.fixedCosts&&e.percentageCosts===t.percentageCosts}function Tt(t){return Object(ft.jsxs)("div",{className:"dropdown",children:[Object(ft.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"BrokerDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ft.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"BrokerDropDown",children:t.elements.map((function(e){return Object(ft.jsx)("li",{children:Object(ft.jsx)("button",{className:Ot(t,e)?"dropdown-item active":"dropdown-item",type:"button",onClick:function(i){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function Ct(t){return Object(ft.jsxs)("div",{className:"dropdown",children:[Object(ft.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"GraphDetailDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ft.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"GraphDetailDropDown",children:t.elements.map((function(e){return Object(ft.jsx)("li",{children:Object(ft.jsx)("button",{className:t.value===e.value?"dropdown-item active":"dropdown-item",type:"button",onClick:function(i){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function It(t){return Object(ft.jsxs)("div",{className:"dropdown position-relative mb-1",children:[Object(ft.jsx)("button",{className:"btn btn-secondary dropdown-toggle is-invalid",type:"button",id:"ETFSelectionDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(ft.jsx)(pt,Object(c.a)({},t)),Object(ft.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"ETFSelectionDropDown",children:Object.keys(t.elements).map((function(e){return Object(ft.jsx)("li",{children:Object(ft.jsx)("button",{className:t.elements[e].selected?"dropdown-item active":"dropdown-item",type:"button",onClick:function(i){i.target instanceof HTMLInputElement||t.handleSelectionChange(t.elements[e])},children:Object(ft.jsx)(gt,Object(c.a)(Object(c.a)({},t.elements[e]),{},{value:t.elements[e].value,textAppending:"%",onValueChange:t.handleShareChange,disabled:t.autoPercentage,isValid:!0,errorMessage:""}))})},e)}))})]})}function wt(t){for(var e=[],i=10*Math.ceil(t.minConfidence.value/10);i<=t.maxConfidence.value;i+=10)e.push(i);return Object(ft.jsxs)("div",{className:"confidence",children:[Object(ft.jsx)(xt,Object(c.a)({},t.minConfidence)),Object(ft.jsxs)("div",{className:"row",children:[Object(ft.jsx)("div",{className:"col",children:Object(ft.jsx)(yt,Object(c.a)(Object(c.a)({},t.minConfidence),{},{noLabel:!0}))}),Object(ft.jsx)("div",{className:"col-1",children:"-"}),Object(ft.jsx)("div",{className:"col",children:Object(ft.jsx)(yt,Object(c.a)(Object(c.a)({},t.maxConfidence),{},{noLabel:!0}))})]}),Object(ft.jsx)("input",{type:"range",className:"form-range",min:t.minConfidence.value,max:t.maxConfidence.value,step:.1,id:t.middleConfidence.identifier,value:t.middleConfidence.value,onChange:function(e){return t.middleConfidence.onValueChange(e.target.value,t.middleConfidence.identifier,!0)}})]})}var At="startingCapital",Pt="monthlyInvestment",Dt="yearlyInvestmentIncrease",Ft="transactionPercentageCosts",kt="transactionFixedCosts",Vt="savingPhase",Mt="age",Et="taxFreeAmount",_t="monthlyPayout",Nt="yearlyPayoutIncrease",Lt="lifeExpectation",zt="detailedGraph",Yt="etfDropdownSelection",Gt="apiKey",Rt="yAxisLock",Wt="inflationUsedForTotal",Bt="minConfidence",Ut="maxConfidence",Ht="middleConfidence",Kt="useDistributionModel",Jt="useConfidenceVisualization",qt="brokerDropdown",Zt="etfAutomaticPercentage",$t={"SP5C.PAR":"S & P 500",ESGE:"MSCI EM",SUSA:"MSCI USA ESG"};function Qt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{percentageCosts:e?T(t.transactionPercentageCosts.value):t.transactionPercentageCosts.value,fixedCosts:t.transactionFixedCosts.value}}function Xt(t){var e=0;for(var i in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[i].selected&&e++;var a=100/Math.max(1,e);for(var n in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[n].selected&&(t.etfDropdownSelection.elements[n].value=a);return t}var te=function(t){Object(p.a)(i,t);var e=Object(x.a)(i);function i(t){var a;return Object(u.a)(this,i),(a=e.call(this,t)).handleTextChange=a.handleTextChange.bind(Object(v.a)(a)),a.handleCheckBoxChange=a.handleCheckBoxChange.bind(Object(v.a)(a)),a.handleBrokerChange=a.handleBrokerChange.bind(Object(v.a)(a)),a.handleGraphDetailChange=a.handleGraphDetailChange.bind(Object(v.a)(a)),a.handleETFSelectionChange=a.handleETFSelectionChange.bind(Object(v.a)(a)),a.handleETFShareChange=a.handleETFShareChange.bind(Object(v.a)(a)),a.handleAPIKeyConfirm=a.handleAPIKeyConfirm.bind(Object(v.a)(a)),a.state=function(t){var e;return e={isValid:!0},Object(d.a)(e,At,{value:1e3,label:"Starting Capital",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:At,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Pt,{value:100,label:"Monthly Investment",errorMessage:"Please enter a positive Money amount.",textAppending:"\u20ac",isValid:!0,identifier:Pt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Dt,{value:0,label:"Yearly Investment Increase",errorMessage:"",textAppending:"%",isValid:!0,identifier:Dt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,_t,{value:1e3,label:"Monthly Payout",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:_t,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Nt,{value:0,label:"Yearly Payout Increase",errorMessage:"",textAppending:"%",isValid:!0,identifier:Nt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Ft,{value:1.5,label:"Percentage Transaction Costs",errorMessage:"",textAppending:"%",isValid:!0,identifier:Ft,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,kt,{value:0,label:"Fixed Transaction Costs",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:kt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Vt,{value:40,label:"Saving Phase",errorMessage:"",textAppending:"Years",isValid:!0,identifier:Vt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Mt,{value:30,label:"Your Age",textAppending:"Years",errorMessage:"",isValid:!0,identifier:Mt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Lt,{value:80,label:"Life Expectation",errorMessage:"",isValid:!0,textAppending:"Years",identifier:Lt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Et,{value:801,label:"Tax Free Amount",errorMessage:"",isValid:!0,textAppending:"\u20ac",identifier:Et,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Bt,{value:70,label:"Confidence Interval",errorMessage:"",isValid:!0,textAppending:"%",identifier:Bt,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Ut,{value:100,label:"",errorMessage:"",isValid:!0,textAppending:"",identifier:Ut,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Ht,{value:90,label:"",errorMessage:"",isValid:!0,textAppending:"",identifier:Ht,onValueChange:t.handleTextChange,disabled:!1}),Object(d.a)(e,Zt,{value:!1,label:"Automatic ETF Ratio",identifier:Zt,onValueChange:t.handleCheckBoxChange}),Object(d.a)(e,Wt,{value:!1,label:"Subtract Inflation of Total",identifier:Wt,onValueChange:t.handleCheckBoxChange}),Object(d.a)(e,Jt,{value:!1,label:"Show Confidence",identifier:Jt,onValueChange:t.handleCheckBoxChange}),Object(d.a)(e,Kt,{value:!1,label:"Use Distribution Model",identifier:Kt,onValueChange:t.handleCheckBoxChange}),Object(d.a)(e,Rt,{value:!1,label:"Lock Y Axis Extent",identifier:Rt,onValueChange:t.handleCheckBoxChange}),Object(d.a)(e,Gt,{displayOverlay:!0,error:!1,value:"",label:"",errorMessage:"",isValid:!0,textAppending:"",identifier:Gt,onValueChange:t.handleTextChange,handleAPIKeyConfirm:t.handleAPIKeyConfirm}),Object(d.a)(e,zt,{value:1,label:"Graph Detail Level",isValid:!0,handleChange:t.handleGraphDetailChange,elements:[{identifier:"12",value:12,label:"All Months a Year (high detail)"},{identifier:"3",value:3,label:"Every 4th Month (middle detail)"},{identifier:"1",value:1,label:"One Month a Year (low detail)"}]}),Object(d.a)(e,qt,{label:"Broker",isValid:!0,handleChange:t.handleBrokerChange,elements:[{identifier:"comdirect",label:"comdirect",fixedCosts:0,percentageCosts:1.5},{identifier:"tradeRepublic",label:"Trade Republic",fixedCosts:0,percentageCosts:1},{identifier:"ing",label:"ing",fixedCosts:4.99,percentageCosts:.25}]}),Object(d.a)(e,Yt,{label:"ETF Selection",isValid:!0,identifier:Yt,errorMessage:"",handleSelectionChange:t.handleETFSelectionChange,handleShareChange:t.handleETFShareChange,elements:{S_and_P_500:{identifier:"S_and_P_500",symbol:"SP5C.PAR",label:$t["SP5C.PAR"],value:100,selected:!0},iShare:{identifier:"iShare",symbol:"ESGE",label:$t.ESGE,value:100,selected:!1},msciUSA:{identifier:"msciUSA",symbol:"SUSA",label:$t.SUSA,value:100,selected:!1}}}),e}(Object(v.a)(a)),a}return Object(f.a)(i,[{key:"handleTextChange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Object(c.a)({},this.state);a[e].value=i?Number(t):t,this._validateAndSetState(a)}},{key:"handleCheckBoxChange",value:function(t){var e=Object(c.a)({},this.state);e[t].value=!e[t].value,t===Zt&&e[t].value&&Xt(e),this._validateAndSetState(e)}},{key:"handleBrokerChange",value:function(t){var e=Object(c.a)({},this.state);e.transactionPercentageCosts.value=t.percentageCosts,e.transactionFixedCosts.value=t.fixedCosts,this._validateAndSetState(e)}},{key:"handleGraphDetailChange",value:function(t){var e=Object(c.a)({},this.state);e[zt].value=t.value,this._validateAndSetState(e)}},{key:"handleETFSelectionChange",value:function(t){var e=Object(c.a)({},this.state);e.etfDropdownSelection.elements[t.identifier].selected=!e.etfDropdownSelection.elements[t.identifier].selected,e.etfAutomaticPercentage.value&&Xt(e),this._validateAndSetState(e)}},{key:"handleETFShareChange",value:function(t,e){var i=Object(c.a)({},this.state);i.etfDropdownSelection.elements[e].value=Number(t),this._validateAndSetState(i)}},{key:"handleAPIKeyConfirm",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.apiKey.value,i=Object(c.a)({},this.state.apiKey),t.prev=2,t.next=5,E.loadHistoricData(e,this.state.etfDropdownSelection.elements);case 5:i.error=!1,i.displayOverlay=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),i.error=!0;case 12:this.setState(Object(d.a)({},Gt,i)),this.forceUpdate();case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"_validateAndSetState",value:function(t){var e,i=[Pt,_t,At,Mt,Lt,Vt,Et],a=[Dt,Nt,kt,Ft,Bt,Ut,Ht];t.isValid=!0;for(var n=0,s=i;n<s.length;n++){var r=s[n];t[r].isValid=(e=t[r].value,!Number.isNaN(e)&&Number.isInteger(e)&&e>=0),t[r].errorMessage="Please enter a positive number.",t.isValid=t[r].isValid&&t.isValid}for(var o=0,l=a;o<l.length;o++){var d=l[o];t[d].isValid=C(t[d].value),t[d].errorMessage="Please enter a valid percentage between 0 and 100 %.",t.isValid=t[d].isValid&&t.isValid}var h=t[Lt].value-t[Mt].value;h<=0?(t[Mt].errorMessage="You cannot be older than the life expectation",t[Mt].isValid=!1,t.isValid=!1):h<=t[Vt].value&&(t[Vt].errorMessage="You cannot have a saving phase that lasts longer than your life.",t[Vt].isValid=!1,t.isValid=!1),t[Bt].value>t[Ut].value&&(t[Bt].isValid=!1,t.isValid=!1,t[Bt].errorMessage="The minimum confidence cannot be higher than the maximum confidence."),t[Ht].value=w(t[Ht].value,t[Bt].value,t[Ut].value);var c=0,u=!1;for(var f in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[f].selected&&(c+=T(t.etfDropdownSelection.elements[f].value),u=!0);u?1!==c?(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="The sum of all selected ETFs need to be 100%.",t.isValid=!1):t.etfDropdownSelection.isValid=!0:(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="Please select at least one ETF.",t.isValid=!1),this.setState(t)}},{key:"render",value:function(){var t=Qt(this.state);return Object(ft.jsxs)("div",{className:"container-fluid",children:[Object(ft.jsx)(St,Object(c.a)({},this.state.apiKey)),Object(ft.jsxs)("div",{className:"row row-cols-3",children:[Object(ft.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 bg-light sidebar",children:Object(ft.jsxs)("form",{className:"position-sticky needs-validation",noValidate:!0,children:[Object(ft.jsxs)(jt,{title:"Money Options",initiallyCollapsed:!1,children:[Object(ft.jsx)(yt,Object(c.a)({},this.state[At])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Pt])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Dt])),Object(ft.jsx)(yt,Object(c.a)({},this.state[_t])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Nt])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Et])),Object(ft.jsx)(mt,Object(c.a)({},this.state[Kt]))]}),Object(ft.jsxs)(jt,{title:"Time Options",initiallyCollapsed:!1,children:[Object(ft.jsx)(yt,Object(c.a)({},this.state[Mt])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Lt])),Object(ft.jsx)(yt,Object(c.a)({},this.state[Vt]))]}),Object(ft.jsxs)(jt,{title:"Cost Options",initiallyCollapsed:!0,children:[Object(ft.jsx)(Tt,Object(c.a)(Object(c.a)({},t),this.state.brokerDropdown)),Object(ft.jsx)(yt,Object(c.a)({},this.state.transactionPercentageCosts)),Object(ft.jsx)(yt,Object(c.a)({},this.state.transactionFixedCosts))]}),Object(ft.jsxs)(jt,{title:"Visualization Options",initiallyCollapsed:!0,children:[Object(ft.jsx)(Ct,Object(c.a)({},this.state[zt])),Object(ft.jsx)(mt,Object(c.a)({},this.state[Rt])),Object(ft.jsx)(mt,Object(c.a)({},this.state[Wt])),Object(ft.jsx)(mt,Object(c.a)({},this.state.etfAutomaticPercentage)),Object(ft.jsx)(It,Object(c.a)({autoPercentage:this.state.etfAutomaticPercentage.value},this.state.etfDropdownSelection)),Object(ft.jsx)(mt,Object(c.a)({},this.state[Jt])),Object(ft.jsx)(wt,{minConfidence:this.state[Bt],maxConfidence:this.state[Ut],middleConfidence:this.state[Ht]})]})]})}),Object(ft.jsx)("div",{id:"sidebarMenu",className:"col-md-3 col-lg-2",children:Object(ft.jsx)("h1",{children:"Padding"})}),Object(ft.jsxs)("main",{className:"col-md-9 col-lg-10",children:[Object(ft.jsx)("h1",{children:"Etf Pension Plan Visualization"}),Object(ft.jsx)(vt,Object(c.a)({},this.state))]})]})]})}}]),i}(n.a.Component);var ee=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,168)).then((function(e){var i=e.getCLS,a=e.getFID,n=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),a(t),n(t),s(t),r(t)}))};i(164);r.a.render(Object(ft.jsx)(n.a.StrictMode,{children:Object(ft.jsx)(te,{})}),document.getElementById("root")),ee()}},[[165,1,2]]]);
//# sourceMappingURL=main.24700cd1.chunk.js.map