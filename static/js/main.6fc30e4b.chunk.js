(this["webpackJsonpetf-vis"]=this["webpackJsonpetf-vis"]||[]).push([[0],{159:function(t,e,a){},165:function(t,e,a){"use strict";a.r(e);var n=a(13),i=a.n(n),r=a(49),s=a.n(r),o=(a(159),a(6)),l=a.n(o),c=a(5),d=a(15),h=a(1),u=a(3),v=a(4),f=a(14),p=a(7),y=a(8),x=a(2),b=a(11),g=a(33),m=a.n(g),S=a(10),j=864e5,O=12;function C(t){return 0===t.getMonth()}function w(t,e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(l.a.mark((function t(e,a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.d("https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY_ADJUSTED&symbol=".concat(e,"&apikey=").concat(a,"&datatype=csv"),(function(t){if(void 0===t.timestamp||void 0===t["dividend amount"]||void 0===t["adjusted close"])throw new Error("The history of ".concat(e," contained an undefined field."));return{date:new Date(t.timestamp.toString()),dividend:parseFloat(t["dividend amount"]),course:parseFloat(t["adjusted close"])}}));case 2:return(n=t.sent).sort((function(t,e){return t.date.valueOf()-e.date.valueOf()})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t){return t.map((function(t){return[D(t.date),t.course]}))}function k(t){var e=t[0].date.getFullYear(),a=[[e,0]];return t.forEach((function(t){t.date.getFullYear()===e?a[a.length-1][1]+=t.dividend:(e=t.date.getFullYear(),a.push([e,t.dividend]))})),a.sort((function(t,e){return t[0]-e[0]})),a}function D(t){return Math.floor(t.getTime()/j)}function A(t){return new Error("First call loadHistoricalDataIfNotPresent() before predicting: ".concat(t))}function I(t){var e,a,n=t.getDate(),i=(e=t.getMonth(),a=t.getFullYear(),new Date(a,e+1,0).getDate()),r=Math.round(n/i);return new Date(t.getFullYear(),t.getMonth()+r)}var M=function(){function t(){Object(u.a)(this,t),this.historicalData={},this.coursePredictors={},this.dividendPredictors={}}return Object(v.a)(t,[{key:"_loadAndCacheHistoricalETFData",value:function(){var e=Object(d.a)(l.a.mark((function e(a){var n,i,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a in this.historicalData)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w(a,t.apiKey);case 4:n=e.sent,i=T(n),r=t._calculateMaxTimestampBeforePredictorRepetition(i),s=k(n),o=t._calculateMaxTimestampBeforePredictorRepetition(s),this.historicalData[a]={history:n,courseForecastArray:i,dividendForecastArray:s},this.coursePredictors[a]={maxTimestampBeforeCoursePredictorRepetition:r,predictors:{}},this.dividendPredictors[a]={maxYearBeforeDividendPredictorRepetition:o,predictors:{}};case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCoursePredictorIfNotPresent",value:function(e,a){if(!(a in this.coursePredictors[e])){var n=this.historicalData[e].courseForecastArray,i=n[n.length-1][0]-Math.abs(n[n.length-1][0]-a)*t.backCastTimeFactor-t.backCastTimestampConstant,r=n.filter((function(t){return t[0]>=i}));this.coursePredictors[e].predictors[a]=m.a.linear(r,{order:2,precision:20})}}},{key:"_courseDateToPredictorTimestampAndDateTimestamp",value:function(t,e){var a=D(t);return[a>this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition?this.coursePredictors[e].maxTimestampBeforeCoursePredictorRepetition:a,a]}},{key:"_createDividendPredictorIfNotPresent",value:function(e,a){if(!(a in this.dividendPredictors[e])){var n=this.historicalData[e].dividendForecastArray,i=n[n.length-1][0]-Math.abs(n[n.length-1][0]-a)*t.backCastTimeFactor-t.backCastTimestampConstant,r=n.filter((function(t){return t[0]>=i}));this.dividendPredictors[e].predictors[a]=m.a.linear(r,{order:2,precision:20})}}},{key:"_dividendYearToPredictorYear",value:function(t,e){return this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition<e?this.dividendPredictors[t].maxYearBeforeDividendPredictorRepetition:e}},{key:"predictCourse",value:function(t,e){if(!(t in this.coursePredictors))throw A(t);var a=this._courseDateToPredictorTimestampAndDateTimestamp(e,t),n=Object(b.a)(a,2),i=n[0],r=n[1];return this._createCoursePredictorIfNotPresent(t,i),this.coursePredictors[t].predictors[i].predict(r)[1]}},{key:"predictDividend",value:function(t,e){if(!(t in this.dividendPredictors))throw A(t);var a=this._dividendYearToPredictorYear(t,e);return this._createDividendPredictorIfNotPresent(t,a),Math.max(0,this.dividendPredictors[t].predictors[a].predict(e)[1])}}],[{key:"configure",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;t.apiKey=e,t.backCastTimeFactor=a;var i=new Date(0);if(i.setMonth(n),t.backCastTimestampConstant=D(i),null!=t.instance){var r=t.getInstance();for(var s in r.coursePredictors)r.coursePredictors[s].maxTimestampBeforeCoursePredictorRepetition=t._calculateMaxTimestampBeforePredictorRepetition(r.historicalData[s].courseForecastArray);for(var o in r.dividendPredictors)r.dividendPredictors[o].maxYearBeforeDividendPredictorRepetition=t._calculateMaxTimestampBeforePredictorRepetition(r.historicalData[o].dividendForecastArray)}}},{key:"loadHistoricData",value:function(){var e=Object(d.a)(l.a.mark((function e(a,n){var i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.configure(a),i=t.getInstance(),e.t0=l.a.keys(n);case 3:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.next=7,i._loadAndCacheHistoricalETFData(n[r].symbol);case 7:e.next=3;break;case 9:console.log("Finished loading the historic data.");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"_calculateMaxTimestampBeforePredictorRepetition",value:function(e){var a=e[0][0],n=e[e.length-1][0];return n+(n-a)/t.backCastTimeFactor}}]),t}();M.instance=null,M.apiKey="",M.backCastTimestampConstant=7,M.backCastTimeFactor=2;var F=a(52),E=a.n(F),_=.26375;function V(t,e){return e.totalShares[t]*e.sharePrizes[t]}function N(t,e){return e.dividendTotalShares[t]*e.sharePrizes[t]}function z(t){var e=new Date(t);return e.setMonth(t.getMonth()+1),e}function Y(t,e){if(function(t){return 11===t.getMonth()}(e)){var a=M.getInstance().predictDividend(t,e.getFullYear()),n=M.getInstance().predictCourse(t,e);return a>0?a:.025*n}return 0}function R(t,e){var a=t*e.percentageCosts+e.fixedCosts,n=Math.max(t-a,0);return[n,a=t-n]}function B(t,e){return[Math.max(0,t-e),Math.max(0,e-t)]}function G(t,e,a){var n=function(t){var e=0;for(var a in t.totalShares)e+=V(a,t);return e}(t),i=a.getFullYear()-e.getFullYear()+(a.getMonth()-e.getMonth())/O;t.inflation=n-n*Math.pow(.99,i)}function L(t,e,a,n,i,r){var s=M.getInstance(),o=0,l=t[t.length-1],c={date:a,newShares:{},totalShares:Object(h.a)({},l.totalShares),dividendNewShares:{},dividendTotalShares:Object(h.a)({},l.dividendTotalShares),totalCosts:l.totalCosts,sharePrizes:{},totalInvestedMoney:Object(h.a)({},l.totalInvestedMoney),newInvestedMoney:{},newInvestment:0,totalTaxes:l.totalTaxes,totalPayout:Object(h.a)({},l.totalPayout),newPayout:{},inflation:0};for(var d in i){var u=i[d]*e;c.newInvestment+=u;var v=R(u,r.costConfig),f=Object(b.a)(v,2),p=f[0];o+=f[1],c.newInvestedMoney[d]=p,c.totalInvestedMoney[d]+=p;var y=s.predictCourse(d,a),x=p/y;c.sharePrizes[d]=y,c.newShares[d]=x;var g=Y(d,a),m=c.totalShares[d]*g/y;c.newShares[d]+=m,c.dividendNewShares[d]=m,c.dividendTotalShares[d]+=m,c.totalShares[d]+=c.newShares[d],c.newPayout[d]=0}c.totalCosts+=o;var S=function(t,e,a,n){if(!C(e)||t.length<2)return[0,a];var i,r,s,o,l,c=0,d=t[t.length-1],h=t.length-O>1?t[t.length-O]:t[1];for(var u in n){for(var v=0,f=1;f<O&&t.length-f>0;f++){v+=(o=u,(l=t[t.length-f]).newShares[o]*l.sharePrizes[o]*f/O)}v+=V(u,h)*(O-h.date.getMonth())/O,v*=.0049;var p=V(u,d)-d.totalInvestedMoney[u],y=0;t.length>O&&(y=Math.max(0,V(u,t[t.length-1-O])-t[t.length-1-O].totalInvestedMoney[u]));var x=(i=p-y,r=0,s=v,Math.max(r,Math.min(i,s))),g=B(x,a),m=Object(b.a)(g,2);x=m[0],a=m[1],c+=.7*x*_}return[c,a]}(t,a,r.taxFreeAmount,i),j=Object(b.a)(S,2),w=j[0],P=j[1];return c.totalTaxes+=w,G(c,n,a),t.push(c),P}function W(t,e,a,n,i,r,s,o,l){C(n)&&(o=r.taxFreeAmount);var c=M.getInstance(),d=0,u=0,v=t[t.length-1],f={date:n,newShares:{},totalShares:Object(h.a)({},v.totalShares),dividendNewShares:{},dividendTotalShares:Object(h.a)({},v.dividendTotalShares),totalCosts:v.totalCosts,sharePrizes:{},totalInvestedMoney:Object(h.a)({},v.totalInvestedMoney),newInvestedMoney:{},newInvestment:0,totalTaxes:v.totalTaxes,totalPayout:Object(h.a)({},v.totalPayout),newPayout:{},inflation:0};for(var p in a){var y=c.predictCourse(p,n);if(f.sharePrizes[p]=y,f.newPayout[p]=0,f.newInvestedMoney[p]=0,l[p].investmentStepsIdx<t.length){for(var x=e*a[p],g=0,m=R(x,r.costConfig)[1],S=0,j=l[p].investmentStepsIdx,O=t[j].newShares[p]-l[p].alreadySoldShares;j<t.length;j++){var w=x-g,P=t[j],T=y*(j===l[p].investmentStepsIdx?P.newShares[p]-l[p].alreadySoldShares:P.newShares[p]),k=Math.min(T,w),D=k/y;O=P.newShares[p]-D,O-=j===l[p].investmentStepsIdx?l[p].alreadySoldShares:0;var A=Math.max(0,k-(m-S));S+=Math.max(0,k-A);var I=D*P.sharePrizes[p],F=Math.max(0,A-I),E=B(F,o),V=Object(b.a)(E,2);F=V[0],o=V[1];var N=.7*F*_,z=B(N,s),L=Object(b.a)(z,2);N=L[0],s=L[1],u+=N;var W=A-N;f.newPayout[p]+=W,f.totalPayout[p]+=W,f.totalShares[p]-=D,g+=k;var K=0;K=j===l[p].investmentStepsIdx?Math.max(0,P.dividendNewShares[p]-l[p].alreadySoldShares):P.dividendNewShares[p];var H=Math.min(K,D);if(f.dividendTotalShares[p]-=H,g>=x)break}d+=S,l[p].investmentStepsIdx=j,l[p].investmentStepsIdx+=0===O?1:0,l[p].alreadySoldShares=j<t.length?t[j].newShares[p]-O:0}var U=f.totalShares[p]*Y(p,n)/y;f.newShares[p]=U,f.totalShares[p]+=U,f.dividendNewShares[p]=U,f.dividendTotalShares[p]+=U}return f.totalCosts+=d,f.totalTaxes+=u,G(f,i,n),t.push(f),[s,o]}function K(t,e){var a=M.getInstance(),n={date:e,totalCosts:0,totalTaxes:0,newShares:{},totalShares:{},dividendNewShares:{},dividendTotalShares:{},totalInvestedMoney:{},totalPayout:{},newPayout:{},sharePrizes:{},newInvestedMoney:{},newInvestment:0,inflation:0};for(var i in t)n.newShares[i]=0,n.totalShares[i]=0,n.dividendNewShares[i]=0,n.dividendTotalShares[i]=0,n.totalInvestedMoney[i]=0,n.totalPayout[i]=0,n.newPayout[i]=0,n.newInvestedMoney[i]=0,n.sharePrizes[i]=a.predictCourse(i,e);return n}var H=function(){function t(e,a,n,i,r,s,o,l){Object(u.a)(this,t),this.startCapital=void 0,this.monthlyInvestment=void 0,this.monthlyPayout=void 0,this.savingPhaseLength=void 0,this.etfToRatio=void 0,this.configOptions=void 0,this.expectationOfLife=void 0,this.age=void 0,this.savingDates=[],this.payoutDates=[],this.initialDate=new Date,this.investmentSteps=[],this.startCapital=e,this.monthlyInvestment=a,this.monthlyPayout=n,this.savingPhaseLength=i,this.etfToRatio=r,this.configOptions=s,this.expectationOfLife=l,this.age=o,this._calculateTimestampsForModel(),this._calculateModel()}return Object(v.a)(t,[{key:"_calculateTimestampsForModel",value:function(){for(var t=function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=e-t,r=new Date,s=new Date(r.getFullYear(),r.getMonth()+1),o=new Date(s);o.setFullYear(s.getFullYear()+a);var l=new Date(s);return l.setFullYear(s.getFullYear()+i+n),[s,o,l]}(this.age,this.expectationOfLife,this.savingPhaseLength),e=Object(b.a)(t,3),a=e[0],n=e[1],i=e[2],r=[],s=a;s<n;s=z(s))r.push(s);this.savingDates=r;for(var o=[],l=n;l<i;l=z(l))o.push(l);this.payoutDates=o,this.initialDate=a}},{key:"_calculateModel",value:function(){var t=[K(this.etfToRatio,this.savingDates[0])];L(t,this.monthlyInvestment+this.startCapital,this.savingDates[0],this.initialDate,this.etfToRatio,this.configOptions);var e,a=Object(x.a)(this.savingDates.slice(1));try{for(a.s();!(e=a.n()).done;){var n=e.value;L(t,this.monthlyInvestment,n,this.initialDate,this.etfToRatio,this.configOptions)}}catch(v){a.e(v)}finally{a.f()}var i=(t=t.slice(1))[t.length-1].totalTaxes,r=this.configOptions.taxFreeAmount,s={};for(var o in this.etfToRatio)s[o]={investmentStepsIdx:0,alreadySoldShares:0};var l,c=Object(x.a)(this.payoutDates);try{for(c.s();!(l=c.n()).done;){var d=l.value,h=W(t,this.monthlyPayout,this.etfToRatio,d,this.initialDate,this.configOptions,i,r,s),u=Object(b.a)(h,2);i=u[0],r=u[1]}}catch(v){c.e(v)}finally{c.f()}this.investmentSteps=t}},{key:"getInvestmentSteps",value:function(t){if(!Number.isInteger(O/t))throw new Error("The numberOfEntriesPerYear need to be dividable by ".concat(O," in order to make sense."));if(t===O)return this.investmentSteps;for(var e=[],a=O/t,n=0;n<this.investmentSteps.length;n+=a){for(var i=E()(this.investmentSteps[n]),r=1;r<a;r++)for(var s in i.newInvestment+=this.investmentSteps[n+r].newInvestment,this.investmentSteps[n+r].newPayout)i.newPayout[s]+=this.investmentSteps[n+r].newPayout[s];e.push(i)}return e}},{key:"getPayoutPhaseBeginDate",value:function(){return this.payoutDates[0]}}]),t}(),U=a(12),J=a(9),q=5e6,Q=1e6;function X(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1),": ").concat(null==e?"-":e)}function Z(t){var e,a=Object(x.a)($.activeStrategies);try{for(a.s();!(e=a.n()).done;){e.value.interaction.style("display",t)}}catch(n){a.e(n)}finally{a.f()}}var $=function(){function t(e,a,n,i,r,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1100,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:300,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:200,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:40;if(Object(u.a)(this,t),this.constructor===t)throw new Error("Abstract classes can't be instantiated.");t.activeStrategies.push(this),this.investmentSteps=e,this.payoutPhaseStartDate=n,this.tooltipDate=r,this.yExtent=s,this.marginW=c,this.marginH=d,this.width=o,this.height=l,this.lineStrokeWidth=3,this.labelValueIdentifier="value",a.innerHTML="",this.svg=S.m(a).append("svg").attr("id",i).attr("viewBox","0 0 ".concat(this.width+2*this.marginW," ").concat(this.height+2*this.marginH)).append("g").attr("transform","translate(".concat([this.marginW/2,this.marginH],")"))}return Object(v.a)(t,[{key:"render",value:function(){this._prepareData(),this._calculateExtents(),this._createScales(),this._drawContent(),this._prepareText(),this._drawText(),this._drawAxis(),this._addInteraction(),null!=this.tooltipDate&&this._updateAllDiagrams()}},{key:"_calculateExtents",value:function(){var t=this;this.dateExtent=S.f(this.dataArray[0],(function(t){return t.date}));var e=new Date(this.payoutPhaseStartDate);if(e.setMonth(e.getMonth()+O),null==this.yExtent){var a=this.dataArray[this.maxIndex].filter((function(a){return a.date<=e&&a.date>t.dateExtent[0]})),n=this.dataArray[this.minIndex].filter((function(t){return t.date<=e})),i=S.h(a.map((function(t){return t.yStart}))),r=S.i(n.map((function(t){return t.yEnd})));this.yExtent=[r,i]}}},{key:"_createScales",value:function(){this.yScale=S.k().domain(this.yExtent).range([this.height,0]),this.xScale=S.l().domain(this.dateExtent).range([0,this.width])}},{key:"valueToDisplayText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Math.max(-this.yExtent[0],this.yExtent[1])>=q?Q:1e3,n=a===Q?"M":"K";return e&&(t=Math.abs(t)),"".concat((t/a).toLocaleString(void 0,{maximumFractionDigits:2})).concat(n," \u20ac")}},{key:"_drawAxis",value:function(){var t=this;this.svg.append("g").style("font-size","20px").call(S.c(this.yScale).tickFormat((function(e){return t.valueToDisplayText(e)})).ticks(7)),this.svg.append("g").style("font-size","20px").attr("transform","translate(0, ".concat(this.height,")")).call(S.b(this.xScale)),this.svg.append("g").append("line").attr("x1",this.xScale(this.dateExtent[0])).attr("y1",this.yScale(0)).attr("x2",this.xScale(this.dateExtent[1])).attr("y2",this.yScale(0)).style("stroke-width",this.lineStrokeWidth).style("stroke","black"),this.svg.append("g").append("line").attr("x1",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y1",this.yScale(this.yExtent[0])).attr("x2",this.xScale(this.payoutPhaseStartDate)-this.lineStrokeWidth/2).attr("y2",this.yScale(this.yExtent[1])).style("stroke-width",this.lineStrokeWidth).style("stroke","black")}},{key:"_addInteraction",value:function(){var t=this;this.interaction=this.svg.append("g").attr("class","interaction").style("display","none").attr("transform","translate(".concat([0,-this.marginH],")")),this.hoverLine=this.interaction.append("line").attr("class","tooltipLine").style("stroke","blue").style("stroke-dasharray","3,3").style("opacity",.5).attr("y1",this.height+2*this.marginH).attr("y2",0),this.svg.append("rect").attr("class","mouseEvent").attr("transform","translate(".concat([0,-this.marginH],")")).attr("height",this.height+2*this.marginH).attr("width",this.width).attr("fill","none").style("pointer-events","all").on("mouseover",(function(){return Z(null)})).on("mouseout",(function(){return Z("none")})).on("mousemove",(function(e){return t._handleTooltipEvent(e)}))}},{key:"_handleTooltipEvent",value:function(t){var e=S.j(t)[0],a=this.xScale.invert(e);this.tooltipDate=I(a),this._updateAllDiagrams()}},{key:"_updateAllDiagrams",value:function(){var e,a=function(t,e){var a=e[0].date,n=e[1].date,i=(t.getFullYear()-a.getFullYear())*O+(t.getMonth()-a.getMonth()),r=(n.getFullYear()-a.getFullYear())*O+(n.getMonth()-a.getMonth());return Math.floor(i/r)}(this.tooltipDate,this.investmentSteps),n=Object(x.a)(t.activeStrategies);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.hoverLine.attr("x1",this.xScale(this.tooltipDate)).attr("x2",this.xScale(this.tooltipDate)),i._updateTooltip(a),i._updateDiagram()}}catch(r){n.e(r)}finally{n.f()}}},{key:"_drawText",value:function(){this.textGroup=this.svg.append("g").attr("class","textGroup"),this.textGroup.selectAll("text").data(Object.values(this.textProperties)).enter().append("text").text((function(t){return t.text})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).style("font-size",(function(t){return t.fontSize})).style("font-weight",(function(t){return t.fontWeight})).style("text-anchor",(function(t){return t.textAnchor})).style("fill",(function(t){return t.color}))}},{key:"_updateDiagram",value:function(){this.textGroup.selectAll("text").text((function(t){return t.text}))}},{key:"_prepareText",value:function(){var t=this.xScale(this.dateExtent[0])+(this.xScale(this.payoutPhaseStartDate)-this.xScale(this.dateExtent[0]))/2,e=this.xScale(this.payoutPhaseStartDate)+(this.xScale(this.dateExtent[1])-this.xScale(this.payoutPhaseStartDate))/2,a=-10;this.standardFontSize=20,this.textProperties={savingBold:{text:"SAVING",x:t,y:a,fontSize:this.standardFontSize,textAnchor:"end",fontWeight:"bold",color:"black"},savingPhase:{text:"Phase",x:t,y:a,fontSize:this.standardFontSize,textAnchor:"start",fontWeight:"normal",color:"black"},payoutBold:{text:"PAYOUT",x:e,y:a,fontSize:this.standardFontSize,textAnchor:"end",fontWeight:"bold",color:"black"},payoutPhase:{text:"Phase",x:e,y:a,fontSize:this.standardFontSize,textAnchor:"start",fontWeight:"normal",color:"black"}}}},{key:"_prepareData",value:function(){throw new Error("Abstract method. Not Implemented")}},{key:"_drawContent",value:function(){throw new Error("Abstract method. Not Implemented")}},{key:"_updateTooltip",value:function(){throw new Error("Abstract method. Not Implemented")}}],[{key:"reset",value:function(){t.activeStrategies=[]}}]),t}();function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"Inv: ".concat(null==t?"-":t,", Tot: ").concat(null==e?"-":e)}$.activeStrategies=[];var et=["costs","taxes","inflation"],at={costs:"totalCosts",taxes:"totalTaxes",inflation:"inflation"},nt="capital",it="invested",rt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t,n,i,r,s){var o;return Object(u.a)(this,a),(o=e.call(this,t,n,i,"firstSVG",r,s)).etfLineColors={"SP5C.PAR":{total:"#0562a0",invested:"#71c1f7"},ESGE:{total:"#ff1eff",invested:"#ff63ff"},SUSA:{total:"#23ff01",invested:"#7dff69"}},o.colors={inflation:"#ff7f00",costs:"#be3bff",taxes:"#e31a1c"},o.lineOpacity=.7,o.etfIdentifiers=Object.keys(o.investmentSteps[0].totalShares),o}return Object(v.a)(a,[{key:"_prepareData",value:function(){this.dataToIndex={costs:0,taxes:1,inflation:2};var t,e=3,a=Object(x.a)(this.etfIdentifiers);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.dataToIndex[n+it]=e++,this.dataToIndex[n+nt]=e++}}catch(v){a.e(v)}finally{a.f()}this.minIndex=this.dataToIndex.inflation,this.maxIndex=e-1,this.dataArray=[];for(var i=0;i<e;i++)this.dataArray.push([]);var r,s=Object(x.a)(this.investmentSteps);try{for(s.s();!(r=s.n()).done;){var o=r.value;this.dataArray[this.dataToIndex.costs].push({yStart:0,yEnd:-o.totalCosts,date:o.date}),this.dataArray[this.dataToIndex.taxes].push({yStart:-o.totalCosts,yEnd:-o.totalCosts-o.totalTaxes,date:o.date}),this.dataArray[this.dataToIndex.inflation].push({yStart:-o.totalCosts-o.totalTaxes,yEnd:-o.totalCosts-o.totalTaxes-o.inflation,date:o.date});var l=0;for(var c in o.totalShares){var d=V(c,o),h=N(c,o);this.dataArray[this.dataToIndex[c+nt]].push({yStart:d+l,yEnd:d-h+l,date:o.date}),this.dataArray[this.dataToIndex[c+it]].push({yStart:d-h+l,yEnd:l,date:o.date}),l+=d}}}catch(v){s.e(v)}finally{s.f()}for(var u in this.dataArray[this.dataToIndex.inflation].color=this.colors.inflation,this.dataArray[this.dataToIndex.taxes].color=this.colors.taxes,this.dataArray[this.dataToIndex.costs].color=this.colors.costs,this.investmentSteps[0].totalShares)this.dataArray[this.dataToIndex[u+it]].color=this.etfLineColors[u].invested,this.dataArray[this.dataToIndex[u+nt]].color=this.etfLineColors[u].total}},{key:"_drawLines",value:function(){for(var t=this,e=0;e<this.dataArray.length;e++)this.svg.append("path").datum(this.dataArray[e]).style("stroke",(function(t){return t.color})).style("stroke-width",this.lineStrokeWidth).style("opacity",this.lineOpacity).style("fill","none").attr("d",S.g().x((function(e){return t.xScale(e.date)})).y((function(e){return t.yScale(e.yStart)})))}},{key:"_drawContent",value:function(){this._drawArea()}},{key:"_drawArea",value:function(){for(var t=this,e=0;e<this.dataArray.length;e++)this.svg.append("g").attr("class","area").append("path").datum(this.dataArray[e]).style("opacity",this.lineOpacity).style("fill",(function(t){return t.color})).attr("d",S.a().curve(S.e).x((function(e){return t.xScale(e.date)})).y0((function(e){return t.yScale(e.yEnd)})).y1((function(e){return t.yScale(e.yStart)})))}},{key:"_prepareText",value:function(){Object(U.a)(Object(J.a)(a.prototype),"_prepareText",this).call(this);for(var t=.005*this.width,e=.3*this.standardFontSize,n=0;n<et.length;n++)this.textProperties[et[n]]={text:X(et[n]),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)+(this.standardFontSize+e)*n+this.standardFontSize,fontSize:this.standardFontSize,textAnchor:"start",fontWeight:"normal",color:this.colors[et[n]]};for(var i=0;i<this.etfIdentifiers.length;i++)this.textProperties[this.etfIdentifiers[i]]={text:Nt[this.etfIdentifiers[i]],x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)-(this.standardFontSize+e)*i*2-2*this.standardFontSize,fontSize:this.standardFontSize,textAnchor:"start",fontWeight:"normal",color:this.etfLineColors[this.etfIdentifiers[i]].total};for(var r=0;r<this.etfIdentifiers.length;r++)this.textProperties[this.etfIdentifiers[r]+this.labelValueIdentifier]={text:tt(),x:this.xScale(this.dateExtent[1])+t,y:this.yScale(0)-(this.standardFontSize+e)*r*2-1*this.standardFontSize,fontSize:this.standardFontSize,textAnchor:"start",fontWeight:"normal",color:this.etfLineColors[this.etfIdentifiers[r]].total}}},{key:"_updateTooltip",value:function(t){var e,a=Object(x.a)(this.etfIdentifiers);try{for(a.s();!(e=a.n()).done;){var n=e.value,i=V(n,this.investmentSteps[t]),r=i-N(n,this.investmentSteps[t]),s=tt(this.valueToDisplayText(r,!0),this.valueToDisplayText(i,!0));this.textProperties[n+this.labelValueIdentifier].text=s}}catch(u){a.e(u)}finally{a.f()}var o,l=Object(x.a)(et);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=this.investmentSteps[t][at[c]],h=X(c,this.valueToDisplayText(d,!0));this.textProperties[c].text=h}}catch(u){l.e(u)}finally{l.f()}}}]),a}($);function st(t){var e=0;for(var a in t.newPayout)e+=t.newPayout[a];return e}var ot=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t,n,i,r,s){var o;return Object(u.a)(this,a),(o=e.call(this,t,n,i,"secondSVG",r,s)).barPaddingPercentage=.9,o.zeroLineStrokeWidth=3,o.colors={payout:"#3acc5c",invested:"#ff3e58"},o}return Object(v.a)(a,[{key:"render",value:function(){Object(U.a)(Object(J.a)(a.prototype),"render",this).call(this)}},{key:"_prepareData",value:function(){var t=0,e=1;this.minIndex=t,this.maxIndex=e,this.dataArray=[[],[]];var a,n=Object(x.a)(this.investmentSteps);try{for(n.s();!(a=n.n()).done;){var i=a.value,r=st(i);this.dataArray[t].push({yStart:0,yEnd:-i.newInvestment,date:i.date,color:this.colors.invested}),this.dataArray[e].push({yStart:r,yEnd:0,date:i.date,color:this.colors.payout})}}catch(s){n.e(s)}finally{n.f()}this.rectWidth=this.width/this.dataArray[t].length*this.barPaddingPercentage}},{key:"_prepareText",value:function(){Object(U.a)(Object(J.a)(a.prototype),"_prepareText",this).call(this);var t=this.xScale(this.payoutPhaseStartDate)+(this.xScale(this.dateExtent[1])-this.xScale(this.payoutPhaseStartDate))/2,e=this.yScale(0)+(this.yScale(this.yExtent[0])-this.yScale(0))/2,n="payout";this.textProperties.payout={text:X(n),x:t,y:e,fontSize:this.standardFontSize,textAnchor:"middle",fontWeight:"normal",color:this.colors.payout};var i=this.xScale(this.dateExtent[0])+(this.xScale(this.payoutPhaseStartDate)-this.xScale(this.dateExtent[0]))/2,r=this.yScale(0)-(this.yScale(0)-this.yScale(this.yExtent[1]))/2,s="invested";this.textProperties.invested={text:X(s),x:i,y:r,fontSize:this.standardFontSize,textAnchor:"middle",fontWeight:"normal",color:this.colors.invested}}},{key:"_updateTooltip",value:function(t){var e=st(this.investmentSteps[t]),a=this.investmentSteps[t].newInvestment;this.textProperties.payout.text=X("payout",this.valueToDisplayText(e)),this.textProperties.invested.text=X("invested",this.valueToDisplayText(a))}},{key:"_drawContent",value:function(){var t,e=this,a=this.dataArray[0][this.dataArray[0].length-1].date===this.dateExtent[1],n=Object(x.a)(this.dataArray);try{for(n.s();!(t=n.n()).done;){var i=t.value;a&&(i=i.slice(0,-1)),this.svg.append("g").attr("class","bars").selectAll("rect.none").data(i).enter().append("rect").style("fill",(function(t){return t.color})).attr("x",(function(t){return e.xScale(t.date)})).attr("width",this.rectWidth).attr("y",(function(t){return e.yScale(t.yStart)})).attr("height",(function(t){return e.yScale(t.yEnd)-e.yScale(t.yStart)}))}}catch(r){n.e(r)}finally{n.f()}}}]),a}($),lt=a(0),ct=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).firstSVGRef=i.a.createRef(),t.secondSVGRef=i.a.createRef(),t.areaChart=void 0,t.barChart=void 0,t.investmentModel=void 0,t}return Object(v.a)(a,[{key:"_getInvestmentModel",value:function(){var t={},e=this.props.etfDropdownSelection.elements;for(var a in e)e[a].selected&&(t[e[a].symbol]=e[a].percentage);var n={taxFreeAmount:this.props[kt].value,costConfig:Bt(this.props)};return new H(this.props[jt].value,this.props[Ot].value,this.props[Dt].value,this.props[Pt].value,t,n,this.props[Tt].value,this.props[At].value)}},{key:"_getTooltipDate",value:function(){return null!=this.areaChart?this.areaChart.tooltipDate:null!=this.barChart?this.barChart.tooltipDate:void 0}},{key:"_getYAxisExtent",value:function(t){return null!=t&&this.props[Et].value?t.yExtent:void 0}},{key:"_drawVisualization",value:function(){$.reset();try{if(null!=this.props.isValid&&this.props.isValid){this.investmentModel=this._getInvestmentModel();var t=this.investmentModel.getPayoutPhaseBeginDate(),e=this.investmentModel.getInvestmentSteps(this.props[It].value),a=this._getTooltipDate();this.areaChart=new rt(e,this.firstSVGRef.current,t,a,this._getYAxisExtent(this.areaChart)),this.areaChart.render(),this.barChart=new ot(e,this.secondSVGRef.current,t,a,this._getYAxisExtent(this.barChart)),this.barChart.render()}}catch(n){console.error(n)}}},{key:"componentDidMount",value:function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._drawVisualization();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this._drawVisualization()}},{key:"render",value:function(){return Object(lt.jsxs)(i.a.Fragment,{children:[Object(lt.jsx)("div",{ref:this.secondSVGRef}),Object(lt.jsx)("div",{ref:this.firstSVGRef})]})}}]),a}(i.a.Component);function dt(t){return Object(lt.jsx)("div",{className:"position-relative",children:Object(lt.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1",children:Object(lt.jsx)("span",{children:t.title})})})}function ht(t){return Object(lt.jsx)("div",{id:t.identifier+"Feedback",className:"invalid-tooltip",style:{visibility:t.isValid?"hidden":"visible"},children:t.errorMessage})}function ut(t){return Object(lt.jsxs)("div",{className:"position-relative",children:[Object(lt.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label}),Object(lt.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value.toString()+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(t.transformFunction(e),t.identifier)},disabled:t.disabled}),Object(lt.jsx)(ht,Object(h.a)({},t))]})}function vt(t){return Object(lt.jsxs)("div",{className:"position-relative",children:[Object(lt.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label}),Object(lt.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value.toString()+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(t.transformFunction(e),t.identifier)},disabled:t.disabled}),Object(lt.jsx)(ht,Object(h.a)({},t))]})}function ft(t){return Object(lt.jsxs)("div",{className:"position-relative",children:[Object(lt.jsx)("label",{className:"form-label",htmlFor:t.identifier,children:t.label}),Object(lt.jsx)("input",{className:"form-control "+(t.isValid?"":"is-invalid"),id:t.identifier,type:"text",value:t.value.toString()+(""!==t.textAppending?" "+t.textAppending:""),onChange:function(e){return t.onValueChange(t.transformFunction(e),t.identifier)},disabled:t.disabled}),Object(lt.jsx)(ht,Object(h.a)({},t))]})}function pt(t){return Object(lt.jsxs)("div",{className:"checkbox-element",children:[Object(lt.jsx)("input",{className:"form-check-input",id:t.identifier,type:"checkbox",value:t.value.toString(),onChange:function(){return t.onValueChange(t.identifier)}}),Object(lt.jsx)("label",{className:"form-check-label",htmlFor:t.identifier,children:t.label})]})}function yt(t){return Object(lt.jsx)("div",{className:"row",children:Object(lt.jsx)("div",{className:"col-12 p-0",children:Object(lt.jsx)("div",{className:"d-grid gap-0",children:Object(lt.jsxs)("div",{className:"overlay min-vh-100 text-center m-0 d-flex flex-column justify-content-center",style:{visibility:t.displayOverlay?"visible":"hidden"},children:[Object(lt.jsxs)("h1",{className:"p-5",children:["Enter your personal"," ",Object(lt.jsxs)("a",{href:"https://www.alphavantage.co/support/#api-key",target:"_blank",rel:"noopener noreferrer",children:[" ","Alphavantage API Key"]})," "]}),Object(lt.jsx)(vt,Object(h.a)(Object(h.a)({},t),{},{disabled:!t.displayOverlay})),Object(lt.jsx)("button",{type:"button",className:"btn btn-primary my-5",onClick:t.handleAPIKeyConfirm,children:"Confirm"})]})})})})}function xt(t,e){return e.fixedCosts===t.fixedCosts&&e.percentageCosts===t.percentageCosts}function bt(t){return Object(lt.jsxs)("div",{className:"dropdown",children:[Object(lt.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"BrokerDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(lt.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"BrokerDropDown",children:t.elements.map((function(e){return Object(lt.jsx)("li",{children:Object(lt.jsx)("button",{className:xt(t,e)?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function gt(t){return Object(lt.jsxs)("div",{className:"dropdown",children:[Object(lt.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"GraphDetailDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(lt.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"GraphDetailDropDown",children:t.elements.map((function(e){return Object(lt.jsx)("li",{children:Object(lt.jsx)("button",{className:t.value===e.value?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){return t.handleChange(e)},children:e.label})},e.identifier)}))})]})}function mt(t){var e=parseFloat(t.target.value)/100;return isNaN(e)?0:e}function St(t){return Object(lt.jsxs)("div",{className:"dropdown position-relative",children:[Object(lt.jsx)("button",{className:"btn btn-secondary dropdown-toggle is-invalid",type:"button",id:"ETFSelectionDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:t.label}),Object(lt.jsx)(ht,Object(h.a)({},t)),Object(lt.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"ETFSelectionDropDown",children:Object.keys(t.elements).map((function(e){return Object(lt.jsx)("li",{children:Object(lt.jsx)("button",{className:t.elements[e].selected?"dropdown-item active":"dropdown-item",type:"button",onClick:function(a){t.handleSelectionChange(t.elements[e])},children:Object(lt.jsx)(ft,Object(h.a)(Object(h.a)({},t.elements[e]),{},{value:Math.round(100*t.elements[e].percentage),textAppending:"%",onValueChange:t.handleShareChange,transformFunction:mt,disabled:t.autoPercentage,isValid:!0,errorMessage:""}))})},e)}))})]})}var jt="startingCapital",Ot="monthlyInvestment",Ct="transactionCosts",wt="transactionCostsType",Pt="savingPhase",Tt="age",kt="taxFreeAmount",Dt="monthlyPayout",At="lifeExpectation",It="detailedGraph",Mt="etfDropdownSelection",Ft="apiKey",Et="yAxisLock",_t="brokerDropdown",Vt="etfAutomaticPercentage",Nt={"SP5C.PAR":"S & P 500",ESGE:"iShare",SUSA:"MSCI USA ESG"};function zt(t){var e=t.target.value.split(" ")[0],a=parseInt(e);return isNaN(a)?0:a}function Yt(t){var e=parseFloat(t.target.value);return isNaN(e)?0:e}function Rt(t){return!Number.isNaN(t)&&Number.isInteger(t)&&t>=0}function Bt(t){return t.transactionCostsType.value?{percentageCosts:0,fixedCosts:t.transactionCosts.value}:{percentageCosts:t.transactionCosts.value,fixedCosts:0}}function Gt(t){var e=0;for(var a in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[a].selected&&e++;var n=1/Math.max(1,e);for(var i in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[i].percentage=n;return t}var Lt=function(t){Object(p.a)(a,t);var e=Object(y.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).handleTextChange=n.handleTextChange.bind(Object(f.a)(n)),n.handleCheckBoxChange=n.handleCheckBoxChange.bind(Object(f.a)(n)),n.handleBrokerChange=n.handleBrokerChange.bind(Object(f.a)(n)),n.handleGraphDetailChange=n.handleGraphDetailChange.bind(Object(f.a)(n)),n.handleETFSelectionChange=n.handleETFSelectionChange.bind(Object(f.a)(n)),n.handleETFShareChange=n.handleETFShareChange.bind(Object(f.a)(n)),n.handleAPIKeyConfirm=n.handleAPIKeyConfirm.bind(Object(f.a)(n)),n.state=function(t){var e;return e={isValid:!0},Object(c.a)(e,jt,{value:1e3,label:"Starting Capital",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:jt,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,Ot,{value:100,label:"Monthly Investment",errorMessage:"Please enter a positive Money amount.",textAppending:"\u20ac",isValid:!0,identifier:Ot,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,Dt,{value:1e3,label:"Monthly Payout",errorMessage:"",textAppending:"\u20ac",isValid:!0,identifier:Dt,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,Ct,{value:.015,label:"Transaction Costs",errorMessage:"",textAppending:"%",isValid:!0,identifier:Ct,transformFunction:Yt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,Pt,{value:40,label:"Saving Phase",errorMessage:"",textAppending:"Y",isValid:!0,identifier:Pt,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,Tt,{value:30,label:"Your Age",textAppending:"Y",errorMessage:"",isValid:!0,identifier:Tt,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,At,{value:80,label:"Life Expectation",errorMessage:"",isValid:!0,textAppending:"Y",identifier:At,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,kt,{value:801,label:"Tax Free Amount",errorMessage:"",isValid:!0,textAppending:"\u20ac",identifier:kt,transformFunction:zt,onValueChange:t.handleTextChange,disabled:!1}),Object(c.a)(e,wt,{value:!1,label:"Fixed Amount",identifier:wt,onValueChange:t.handleCheckBoxChange}),Object(c.a)(e,Vt,{value:!1,label:"Automatic ETF Ratio",identifier:Vt,onValueChange:t.handleCheckBoxChange}),Object(c.a)(e,Et,{value:!1,label:"Lock Y Axis Extent",identifier:Et,onValueChange:t.handleCheckBoxChange}),Object(c.a)(e,Ft,{displayOverlay:!0,error:!1,value:"",label:"",errorMessage:"",isValid:!0,textAppending:"",identifier:Ft,transformFunction:function(t){return t.target.value},onValueChange:t.handleTextChange,handleAPIKeyConfirm:t.handleAPIKeyConfirm}),Object(c.a)(e,It,{value:1,label:"Graph Detail Level",isValid:!0,handleChange:t.handleGraphDetailChange,elements:[{identifier:"12",value:12,label:"All Months a Year (highest detail)"},{identifier:"6",value:6,label:"Every 2nd Month (higher detail)"},{identifier:"3",value:3,label:"Every 4th Month (lower detail)"},{identifier:"1",value:1,label:"One Month a Year (lowest detail) (default)"}]}),Object(c.a)(e,_t,{label:"Broker",isValid:!0,handleChange:t.handleBrokerChange,elements:[{identifier:"comdirect",label:"comdirect",fixedCosts:0,percentageCosts:.015},{identifier:"tradeRepublic",label:"Trade Republic",fixedCosts:0,percentageCosts:.01},{identifier:"eToro",label:"eToro",fixedCosts:0,percentageCosts:0}]}),Object(c.a)(e,Mt,{label:"ETF Selection",isValid:!0,identifier:Mt,errorMessage:"",handleSelectionChange:t.handleETFSelectionChange,handleShareChange:t.handleETFShareChange,elements:{S_and_P_500:{identifier:"S_and_P_500",symbol:"SP5C.PAR",label:Nt["SP5C.PAR"],percentage:1,selected:!0},iShare:{identifier:"iShare",symbol:"ESGE",label:Nt.ESGE,percentage:1,selected:!1},msciUSA:{identifier:"msciUSA",symbol:"SUSA",label:Nt.SUSA,percentage:1,selected:!1}}}),e}(Object(f.a)(n)),n}return Object(v.a)(a,[{key:"handleTextChange",value:function(t,e){var a=Object(h.a)({},this.state);a[e].value=t,this._validateAndSetState(a)}},{key:"handleCheckBoxChange",value:function(t){var e=Object(h.a)({},this.state);e[t].value=!e[t].value,t===wt?(e.transactionCosts.value=e[t].value?5:.015,e.transactionCosts.textAppending=e[t].value?"\u20ac":"%",e.transactionCosts.transformFunction=e[t].value?zt:Yt):t===Vt&&e[t].value&&Gt(e),this._validateAndSetState(e)}},{key:"handleBrokerChange",value:function(t){var e=Object(h.a)({},this.state);e.transactionCosts.value=t.percentageCosts>0?t.percentageCosts:t.fixedCosts,e.transactionCostsType.value=!(t.percentageCosts>0),this._validateAndSetState(e)}},{key:"handleGraphDetailChange",value:function(t){var e=Object(h.a)({},this.state);e[It].value=t.value,this._validateAndSetState(e)}},{key:"handleETFSelectionChange",value:function(t){var e=Object(h.a)({},this.state);e.etfDropdownSelection.elements[t.identifier].selected=!e.etfDropdownSelection.elements[t.identifier].selected,e.etfAutomaticPercentage.value&&Gt(e),this._validateAndSetState(e)}},{key:"handleETFShareChange",value:function(t,e){var a=Object(h.a)({},this.state);a.etfDropdownSelection.elements[e].percentage=t,this._validateAndSetState(a)}},{key:"handleAPIKeyConfirm",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.apiKey.value,a=Object(h.a)({},this.state.apiKey),t.prev=2,t.next=5,M.loadHistoricData(e,this.state.etfDropdownSelection.elements);case 5:a.error=!1,a.displayOverlay=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a.error=!0;case 12:this.setState(Object(c.a)({},Ft,a)),this.forceUpdate();case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"_validateAndSetState",value:function(t){var e=[Ot,Dt,jt,Tt,At,Pt,kt];t.isValid=!0;for(var a=0,n=e;a<n.length;a++){var i=n[a];t[i].isValid=Rt(t[i].value),t[i].errorMessage="Please enter a positive number.",t.isValid=t[i].isValid&&t.isValid}var r,s=t[At].value-t[Tt].value;t[Tt].value>=t[At].value?(t[Tt].errorMessage="You cannot be older than the life expectation",t[Tt].isValid=!1,t.isValid=!1):s<=t[Pt].value&&(t[Pt].errorMessage="You cannot have a saving phase that lasts longer than your life.",t[Pt].isValid=!1,t.isValid=!1),t.transactionCostsType.value?(t.transactionCosts.isValid=Rt(t.transactionCosts.value),t.transactionCosts.errorMessage="Please enter a positive number."):(t.transactionCosts.isValid=(r=t.transactionCosts.value,!Number.isNaN(r)&&r>=0&&r<=1),t.transactionCosts.errorMessage="Please enter a valid percentage."),t.isValid=t.transactionCosts.isValid&&t.isValid;var o=0,l=!1;for(var c in t.etfDropdownSelection.elements)t.etfDropdownSelection.elements[c].selected&&(o+=t.etfDropdownSelection.elements[c].percentage,l=!0);l?1!==o?(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="The sum of all selected ETF needs to be 100%",t.isValid=!1):t.etfDropdownSelection.isValid=!0:(t.etfDropdownSelection.isValid=!1,t.etfDropdownSelection.errorMessage="Please select at least one ETF.",t.isValid=!1),this.setState(t)}},{key:"render",value:function(){var t=Bt(this.state);return Object(lt.jsxs)("div",{className:"container-fluid",children:[Object(lt.jsx)(yt,Object(h.a)({},this.state.apiKey)),Object(lt.jsxs)("div",{className:"row",children:[Object(lt.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-2 bg-light sidebar",children:Object(lt.jsxs)("form",{className:"position-sticky needs-validation",noValidate:!0,children:[Object(lt.jsx)(dt,{title:"Money Options"}),Object(lt.jsx)(ut,Object(h.a)({},this.state[jt])),Object(lt.jsx)(ut,Object(h.a)({},this.state[Ot])),Object(lt.jsx)(ut,Object(h.a)({},this.state[Dt])),Object(lt.jsx)(ut,Object(h.a)({},this.state[kt])),Object(lt.jsx)(dt,{title:"Time Options"}),Object(lt.jsx)(ut,Object(h.a)({},this.state[Tt])),Object(lt.jsx)(ut,Object(h.a)({},this.state[At])),Object(lt.jsx)(ut,Object(h.a)({},this.state[Pt])),Object(lt.jsx)(dt,{title:"Cost Options"}),Object(lt.jsx)(ut,Object(h.a)({},this.state.transactionCosts),Ct),Object(lt.jsx)(pt,Object(h.a)({},this.state.transactionCostsType)),Object(lt.jsx)(bt,Object(h.a)(Object(h.a)({},t),this.state.brokerDropdown)),Object(lt.jsx)(dt,{title:"Visualization Options"}),Object(lt.jsx)(gt,Object(h.a)({},this.state[It])),Object(lt.jsx)(pt,Object(h.a)({},this.state[Et])),Object(lt.jsx)(pt,Object(h.a)({},this.state.etfAutomaticPercentage)),Object(lt.jsx)(St,Object(h.a)({autoPercentage:this.state.etfAutomaticPercentage.value},this.state.etfDropdownSelection))]})}),Object(lt.jsxs)("main",{className:"col-md-9 col-lg-10 ms-sm-auto",children:[Object(lt.jsx)("h1",{children:"Etf Pension Plan Visualization"}),Object(lt.jsx)(ct,Object(h.a)({},this.state))]})]})]})}}]),a}(i.a.Component);var Wt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),i(t),r(t),s(t)}))};a(164);s.a.render(Object(lt.jsx)(i.a.StrictMode,{children:Object(lt.jsx)(Lt,{})}),document.getElementById("root")),Wt()}},[[165,1,2]]]);
//# sourceMappingURL=main.6fc30e4b.chunk.js.map